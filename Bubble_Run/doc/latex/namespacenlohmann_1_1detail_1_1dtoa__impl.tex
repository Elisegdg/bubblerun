\hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl}{}\doxysection{nlohmann\+::detail\+::dtoa\+\_\+impl Namespace Reference}
\label{namespacenlohmann_1_1detail_1_1dtoa__impl}\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}


implements the Grisu2 algorithm for binary to decimal floating-\/point conversion.  


\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}}
\item 
struct \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Target , typename Source $>$ }\\Target \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}{reinterpret\+\_\+bits}} (const Source source)
\item 
{\footnotesize template$<$typename Float\+Type $>$ }\\\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\+\_\+boundaries}} (Float\+Type value)
\item 
\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}{get\+\_\+cached\+\_\+power\+\_\+for\+\_\+binary\+\_\+exponent}} (int e)
\item 
int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}{find\+\_\+largest\+\_\+pow10}} (const std\+::uint32\+\_\+t n, std\+::uint32\+\_\+t \&pow10)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\+\_\+round}} (char $\ast$buf, int len, std\+::uint64\+\_\+t dist, std\+::uint64\+\_\+t delta, std\+::uint64\+\_\+t rest, std\+::uint64\+\_\+t ten\+\_\+k)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}{grisu2\+\_\+digit\+\_\+gen}} (char $\ast$buffer, int \&length, int \&decimal\+\_\+exponent, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\+\_\+minus, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\+\_\+plus)
\item 
void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}{grisu2}} (char $\ast$buf, int \&len, int \&decimal\+\_\+exponent, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} m\+\_\+minus, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} v, \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} m\+\_\+plus)
\item 
{\footnotesize template$<$typename Float\+Type $>$ }\\void \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}{grisu2}} (char $\ast$buf, int \&len, int \&decimal\+\_\+exponent, Float\+Type value)
\item 
\mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a78ad745d14b79fc65714c9938981faf6}{append\+\_\+exponent}} (char $\ast$buf, int e)
\begin{DoxyCompactList}\small\item\em appends a decimal representation of e to buf \end{DoxyCompactList}\item 
\mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a0986c3e015db045df89506436f19e07c}{format\+\_\+buffer}} (char $\ast$buf, int len, int decimal\+\_\+exponent, int min\+\_\+exp, int max\+\_\+exp)
\begin{DoxyCompactList}\small\item\em prettify v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{k\+Alpha}} = -\/60
\item 
constexpr int \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{k\+Gamma}} = -\/32
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
implements the Grisu2 algorithm for binary to decimal floating-\/point conversion. 

This implementation is a slightly modified version of the reference implementation which may be obtained from \href{http://florian.loitsch.com/publications}{\texttt{ http\+://florian.\+loitsch.\+com/publications}} (bench.\+tar.\+gz).

The code is distributed under the MIT license, Copyright (c) 2009 Florian Loitsch.

For a detailed description of the algorithm see\+:

\mbox{[}1\mbox{]} Loitsch, \char`\"{}\+Printing Floating-\/\+Point Numbers Quickly and Accurately with     Integers\char`\"{}, Proceedings of the ACM SIGPLAN 2010 Conference on Programming Language Design and Implementation, PLDI 2010 \mbox{[}2\mbox{]} Burger, Dybvig, \char`\"{}\+Printing Floating-\/\+Point Numbers Quickly and Accurately\char`\"{}, Proceedings of the ACM SIGPLAN 1996 Conference on Programming Language Design and Implementation, PLDI 1996 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a78ad745d14b79fc65714c9938981faf6}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a78ad745d14b79fc65714c9938981faf6}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!append\_exponent@{append\_exponent}}
\index{append\_exponent@{append\_exponent}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{append\_exponent()}{append\_exponent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ nlohmann\+::detail\+::dtoa\+\_\+impl\+::append\+\_\+exponent (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



appends a decimal representation of e to buf 

\begin{DoxyReturn}{Returns}
a pointer to the element following the exponent. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
-\/1000 \texorpdfstring{$<$}{<} e \texorpdfstring{$<$}{<} 1000 
\end{DoxyPrecond}


Definition at line \mbox{\hyperlink{json_8hpp_source_l16242}{16242}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{16243 \{}
\DoxyCodeLine{16244     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e > -\/1000);}
\DoxyCodeLine{16245     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e <  1000);}
\DoxyCodeLine{16246 }
\DoxyCodeLine{16247     \textcolor{keywordflow}{if} (e < 0)}
\DoxyCodeLine{16248     \{}
\DoxyCodeLine{16249         e = -\/e;}
\DoxyCodeLine{16250         *buf++ = \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{16251     \}}
\DoxyCodeLine{16252     \textcolor{keywordflow}{else}}
\DoxyCodeLine{16253     \{}
\DoxyCodeLine{16254         *buf++ = \textcolor{charliteral}{'+'};}
\DoxyCodeLine{16255     \}}
\DoxyCodeLine{16256 }
\DoxyCodeLine{16257     \textcolor{keyword}{auto} k = \textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(e);}
\DoxyCodeLine{16258     \textcolor{keywordflow}{if} (k < 10)}
\DoxyCodeLine{16259     \{}
\DoxyCodeLine{16260         \textcolor{comment}{// Always print at least two digits in the exponent.}}
\DoxyCodeLine{16261         \textcolor{comment}{// This is for compatibility with printf("{}\%g"{}).}}
\DoxyCodeLine{16262         *buf++ = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{16263         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{16264     \}}
\DoxyCodeLine{16265     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (k < 100)}
\DoxyCodeLine{16266     \{}
\DoxyCodeLine{16267         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 10);}
\DoxyCodeLine{16268         k \%= 10;}
\DoxyCodeLine{16269         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{16270     \}}
\DoxyCodeLine{16271     \textcolor{keywordflow}{else}}
\DoxyCodeLine{16272     \{}
\DoxyCodeLine{16273         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 100);}
\DoxyCodeLine{16274         k \%= 100;}
\DoxyCodeLine{16275         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k / 10);}
\DoxyCodeLine{16276         k \%= 10;}
\DoxyCodeLine{16277         *buf++ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + k);}
\DoxyCodeLine{16278     \}}
\DoxyCodeLine{16279 }
\DoxyCodeLine{16280     \textcolor{keywordflow}{return} buf;}
\DoxyCodeLine{16281 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!compute\_boundaries@{compute\_boundaries}}
\index{compute\_boundaries@{compute\_boundaries}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{compute\_boundaries()}{compute\_boundaries()}}
{\footnotesize\ttfamily template$<$typename Float\+Type $>$ \\
\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} nlohmann\+::detail\+::dtoa\+\_\+impl\+::compute\+\_\+boundaries (\begin{DoxyParamCaption}\item[{Float\+Type}]{value }\end{DoxyParamCaption})}

Compute the (normalized) diyfp representing the input number \textquotesingle{}value\textquotesingle{} and its boundaries.

\begin{DoxyPrecond}{Precondition}
value must be finite and positive 
\end{DoxyPrecond}


Definition at line \mbox{\hyperlink{json_8hpp_source_l15503}{15503}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15504 \{}
\DoxyCodeLine{15505     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(std::isfinite(value));}
\DoxyCodeLine{15506     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(value > 0);}
\DoxyCodeLine{15507 }
\DoxyCodeLine{15508     \textcolor{comment}{// Convert the IEEE representation into a diyfp.}}
\DoxyCodeLine{15509     \textcolor{comment}{//}}
\DoxyCodeLine{15510     \textcolor{comment}{// If v is denormal:}}
\DoxyCodeLine{15511     \textcolor{comment}{//      value = 0.F * 2\string^(1 -\/ bias) = (          F) * 2\string^(1 -\/ bias -\/ (p-\/1))}}
\DoxyCodeLine{15512     \textcolor{comment}{// If v is normalized:}}
\DoxyCodeLine{15513     \textcolor{comment}{//      value = 1.F * 2\string^(E -\/ bias) = (2\string^(p-\/1) + F) * 2\string^(E -\/ bias -\/ (p-\/1))}}
\DoxyCodeLine{15514 }
\DoxyCodeLine{15515     \textcolor{keyword}{static\_assert}(std::numeric\_limits<FloatType>::is\_iec559,}
\DoxyCodeLine{15516                   \textcolor{stringliteral}{"{}internal error: dtoa\_short requires an IEEE-\/754 floating-\/point implementation"{}});}
\DoxyCodeLine{15517 }
\DoxyCodeLine{15518     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int}      kPrecision = std::numeric\_limits<FloatType>::digits; \textcolor{comment}{// = p (includes the hidden bit)}}
\DoxyCodeLine{15519     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int}      kBias      = std::numeric\_limits<FloatType>::max\_exponent -\/ 1 + (kPrecision -\/ 1);}
\DoxyCodeLine{15520     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int}      kMinExp    = 1 -\/ kBias;}
\DoxyCodeLine{15521     \textcolor{keyword}{constexpr} std::uint64\_t kHiddenBit = std::uint64\_t\{1\} << (kPrecision -\/ 1); \textcolor{comment}{// = 2\string^(p-\/1)}}
\DoxyCodeLine{15522 }
\DoxyCodeLine{15523     \textcolor{keyword}{using} bits\_type = \textcolor{keyword}{typename} std::conditional<kPrecision == 24, std::uint32\_t, std::uint64\_t >::type;}
\DoxyCodeLine{15524 }
\DoxyCodeLine{15525     \textcolor{keyword}{const} \textcolor{keyword}{auto} bits = \textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(reinterpret\_bits<bits\_type>(value));}
\DoxyCodeLine{15526     \textcolor{keyword}{const} std::uint64\_t E = bits >> (kPrecision -\/ 1);}
\DoxyCodeLine{15527     \textcolor{keyword}{const} std::uint64\_t F = bits \& (kHiddenBit -\/ 1);}
\DoxyCodeLine{15528 }
\DoxyCodeLine{15529     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} is\_denormal = E == 0;}
\DoxyCodeLine{15530     \textcolor{keyword}{const} diyfp v = is\_denormal}
\DoxyCodeLine{15531                     ? diyfp(F, kMinExp)}
\DoxyCodeLine{15532                     : diyfp(F + kHiddenBit, static\_cast<int>(E) -\/ kBias);}
\DoxyCodeLine{15533 }
\DoxyCodeLine{15534     \textcolor{comment}{// Compute the boundaries m-\/ and m+ of the floating-\/point value}}
\DoxyCodeLine{15535     \textcolor{comment}{// v = f * 2\string^e.}}
\DoxyCodeLine{15536     \textcolor{comment}{//}}
\DoxyCodeLine{15537     \textcolor{comment}{// Determine v-\/ and v+, the floating-\/point predecessor and successor if v,}}
\DoxyCodeLine{15538     \textcolor{comment}{// respectively.}}
\DoxyCodeLine{15539     \textcolor{comment}{//}}
\DoxyCodeLine{15540     \textcolor{comment}{//      v-\/ = v -\/ 2\string^e        if f != 2\string^(p-\/1) or e == e\_min                (A)}}
\DoxyCodeLine{15541     \textcolor{comment}{//         = v -\/ 2\string^(e-\/1)    if f == 2\string^(p-\/1) and e > e\_min                (B)}}
\DoxyCodeLine{15542     \textcolor{comment}{//}}
\DoxyCodeLine{15543     \textcolor{comment}{//      v+ = v + 2\string^e}}
\DoxyCodeLine{15544     \textcolor{comment}{//}}
\DoxyCodeLine{15545     \textcolor{comment}{// Let m-\/ = (v-\/ + v) / 2 and m+ = (v + v+) / 2. All real numbers \_strictly\_}}
\DoxyCodeLine{15546     \textcolor{comment}{// between m-\/ and m+ round to v, regardless of how the input rounding}}
\DoxyCodeLine{15547     \textcolor{comment}{// algorithm breaks ties.}}
\DoxyCodeLine{15548     \textcolor{comment}{//}}
\DoxyCodeLine{15549     \textcolor{comment}{//      -\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/  (A)}}
\DoxyCodeLine{15550     \textcolor{comment}{//         v-\/            m-\/            v             m+            v+}}
\DoxyCodeLine{15551     \textcolor{comment}{//}}
\DoxyCodeLine{15552     \textcolor{comment}{//      -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/  (B)}}
\DoxyCodeLine{15553     \textcolor{comment}{//                       v-\/     m-\/     v             m+            v+}}
\DoxyCodeLine{15554 }
\DoxyCodeLine{15555     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} lower\_boundary\_is\_closer = F == 0 \&\& E > 1;}
\DoxyCodeLine{15556     \textcolor{keyword}{const} diyfp m\_plus = diyfp(2 * v.f + 1, v.e -\/ 1);}
\DoxyCodeLine{15557     \textcolor{keyword}{const} diyfp m\_minus = lower\_boundary\_is\_closer}
\DoxyCodeLine{15558                           ? diyfp(4 * v.f -\/ 1, v.e -\/ 2)  \textcolor{comment}{// (B)}}
\DoxyCodeLine{15559                           : diyfp(2 * v.f -\/ 1, v.e -\/ 1); \textcolor{comment}{// (A)}}
\DoxyCodeLine{15560 }
\DoxyCodeLine{15561     \textcolor{comment}{// Determine the normalized w+ = m+.}}
\DoxyCodeLine{15562     \textcolor{keyword}{const} diyfp w\_plus = diyfp::normalize(m\_plus);}
\DoxyCodeLine{15563 }
\DoxyCodeLine{15564     \textcolor{comment}{// Determine w-\/ = m-\/ such that e\_(w-\/) = e\_(w+).}}
\DoxyCodeLine{15565     \textcolor{keyword}{const} diyfp w\_minus = diyfp::normalize\_to(m\_minus, w\_plus.e);}
\DoxyCodeLine{15566 }
\DoxyCodeLine{15567     \textcolor{keywordflow}{return} \{diyfp::normalize(v), w\_minus, w\_plus\};}
\DoxyCodeLine{15568 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!find\_largest\_pow10@{find\_largest\_pow10}}
\index{find\_largest\_pow10@{find\_largest\_pow10}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{find\_largest\_pow10()}{find\_largest\_pow10()}}
{\footnotesize\ttfamily int nlohmann\+::detail\+::dtoa\+\_\+impl\+::find\+\_\+largest\+\_\+pow10 (\begin{DoxyParamCaption}\item[{const std\+::uint32\+\_\+t}]{n,  }\item[{std\+::uint32\+\_\+t \&}]{pow10 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

For n != 0, returns k, such that pow10 \+:= 10$^\wedge$(k-\/1) \texorpdfstring{$<$}{<}= n \texorpdfstring{$<$}{<} 10$^\wedge$k. For n == 0, returns 1 and sets pow10 \+:= 1. 

Definition at line \mbox{\hyperlink{json_8hpp_source_l15806}{15806}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15807 \{}
\DoxyCodeLine{15808     \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{15809     \textcolor{keywordflow}{if} (n >= 1000000000)}
\DoxyCodeLine{15810     \{}
\DoxyCodeLine{15811         pow10 = 1000000000;}
\DoxyCodeLine{15812         \textcolor{keywordflow}{return} 10;}
\DoxyCodeLine{15813     \}}
\DoxyCodeLine{15814     \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{15815     \textcolor{keywordflow}{if} (n >= 100000000)}
\DoxyCodeLine{15816     \{}
\DoxyCodeLine{15817         pow10 = 100000000;}
\DoxyCodeLine{15818         \textcolor{keywordflow}{return}  9;}
\DoxyCodeLine{15819     \}}
\DoxyCodeLine{15820     \textcolor{keywordflow}{if} (n >= 10000000)}
\DoxyCodeLine{15821     \{}
\DoxyCodeLine{15822         pow10 = 10000000;}
\DoxyCodeLine{15823         \textcolor{keywordflow}{return}  8;}
\DoxyCodeLine{15824     \}}
\DoxyCodeLine{15825     \textcolor{keywordflow}{if} (n >= 1000000)}
\DoxyCodeLine{15826     \{}
\DoxyCodeLine{15827         pow10 = 1000000;}
\DoxyCodeLine{15828         \textcolor{keywordflow}{return}  7;}
\DoxyCodeLine{15829     \}}
\DoxyCodeLine{15830     \textcolor{keywordflow}{if} (n >= 100000)}
\DoxyCodeLine{15831     \{}
\DoxyCodeLine{15832         pow10 = 100000;}
\DoxyCodeLine{15833         \textcolor{keywordflow}{return}  6;}
\DoxyCodeLine{15834     \}}
\DoxyCodeLine{15835     \textcolor{keywordflow}{if} (n >= 10000)}
\DoxyCodeLine{15836     \{}
\DoxyCodeLine{15837         pow10 = 10000;}
\DoxyCodeLine{15838         \textcolor{keywordflow}{return}  5;}
\DoxyCodeLine{15839     \}}
\DoxyCodeLine{15840     \textcolor{keywordflow}{if} (n >= 1000)}
\DoxyCodeLine{15841     \{}
\DoxyCodeLine{15842         pow10 = 1000;}
\DoxyCodeLine{15843         \textcolor{keywordflow}{return}  4;}
\DoxyCodeLine{15844     \}}
\DoxyCodeLine{15845     \textcolor{keywordflow}{if} (n >= 100)}
\DoxyCodeLine{15846     \{}
\DoxyCodeLine{15847         pow10 = 100;}
\DoxyCodeLine{15848         \textcolor{keywordflow}{return}  3;}
\DoxyCodeLine{15849     \}}
\DoxyCodeLine{15850     \textcolor{keywordflow}{if} (n >= 10)}
\DoxyCodeLine{15851     \{}
\DoxyCodeLine{15852         pow10 = 10;}
\DoxyCodeLine{15853         \textcolor{keywordflow}{return}  2;}
\DoxyCodeLine{15854     \}}
\DoxyCodeLine{15855 }
\DoxyCodeLine{15856     pow10 = 1;}
\DoxyCodeLine{15857     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{15858 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a0986c3e015db045df89506436f19e07c}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a0986c3e015db045df89506436f19e07c}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!format\_buffer@{format\_buffer}}
\index{format\_buffer@{format\_buffer}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{format\_buffer()}{format\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{json_8hpp_a5f2aaec3b681d0a72f7d6e90b70cdcd1}{JSON\+\_\+\+HEDLEY\+\_\+\+RETURNS\+\_\+\+NON\+\_\+\+NULL}} char $\ast$ nlohmann\+::detail\+::dtoa\+\_\+impl\+::format\+\_\+buffer (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{len,  }\item[{int}]{decimal\+\_\+exponent,  }\item[{int}]{min\+\_\+exp,  }\item[{int}]{max\+\_\+exp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



prettify v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent 

If v is in the range \mbox{[}10$^\wedge$min\+\_\+exp, 10$^\wedge$max\+\_\+exp) it will be printed in fixed-\/point notation. Otherwise it will be printed in exponential notation.

\begin{DoxyPrecond}{Precondition}
min\+\_\+exp \texorpdfstring{$<$}{<} 0 

max\+\_\+exp \texorpdfstring{$>$}{>} 0 
\end{DoxyPrecond}


Definition at line \mbox{\hyperlink{json_8hpp_source_l16294}{16294}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{16296 \{}
\DoxyCodeLine{16297     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(min\_exp < 0);}
\DoxyCodeLine{16298     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(max\_exp > 0);}
\DoxyCodeLine{16299 }
\DoxyCodeLine{16300     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = len;}
\DoxyCodeLine{16301     \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = len + decimal\_exponent;}
\DoxyCodeLine{16302 }
\DoxyCodeLine{16303     \textcolor{comment}{// v = buf * 10\string^(n-\/k)}}
\DoxyCodeLine{16304     \textcolor{comment}{// k is the length of the buffer (number of decimal digits)}}
\DoxyCodeLine{16305     \textcolor{comment}{// n is the position of the decimal point relative to the start of the buffer.}}
\DoxyCodeLine{16306 }
\DoxyCodeLine{16307     \textcolor{keywordflow}{if} (k <= n \&\& n <= max\_exp)}
\DoxyCodeLine{16308     \{}
\DoxyCodeLine{16309         \textcolor{comment}{// digits[000]}}
\DoxyCodeLine{16310         \textcolor{comment}{// len <= max\_exp + 2}}
\DoxyCodeLine{16311 }
\DoxyCodeLine{16312         std::memset(buf + k, \textcolor{charliteral}{'0'}, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) -\/ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{16313         \textcolor{comment}{// Make it look like a floating-\/point number (\#362, \#378)}}
\DoxyCodeLine{16314         buf[n + 0] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{16315         buf[n + 1] = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{16316         \textcolor{keywordflow}{return} buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) + 2);}
\DoxyCodeLine{16317     \}}
\DoxyCodeLine{16318 }
\DoxyCodeLine{16319     \textcolor{keywordflow}{if} (0 < n \&\& n <= max\_exp)}
\DoxyCodeLine{16320     \{}
\DoxyCodeLine{16321         \textcolor{comment}{// dig.its}}
\DoxyCodeLine{16322         \textcolor{comment}{// len <= max\_digits10 + 1}}
\DoxyCodeLine{16323 }
\DoxyCodeLine{16324         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(k > n);}
\DoxyCodeLine{16325 }
\DoxyCodeLine{16326         std::memmove(buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n) + 1), buf + n, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) -\/ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n));}
\DoxyCodeLine{16327         buf[n] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{16328         \textcolor{keywordflow}{return} buf + (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) + 1U);}
\DoxyCodeLine{16329     \}}
\DoxyCodeLine{16330 }
\DoxyCodeLine{16331     \textcolor{keywordflow}{if} (min\_exp < n \&\& n <= 0)}
\DoxyCodeLine{16332     \{}
\DoxyCodeLine{16333         \textcolor{comment}{// 0.[000]digits}}
\DoxyCodeLine{16334         \textcolor{comment}{// len <= 2 + (-\/min\_exp -\/ 1) + max\_digits10}}
\DoxyCodeLine{16335 }
\DoxyCodeLine{16336         std::memmove(buf + (2 + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n)), buf, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{16337         buf[0] = \textcolor{charliteral}{'0'};}
\DoxyCodeLine{16338         buf[1] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{16339         std::memset(buf + 2, \textcolor{charliteral}{'0'}, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n));}
\DoxyCodeLine{16340         \textcolor{keywordflow}{return} buf + (2U + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(-\/n) + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k));}
\DoxyCodeLine{16341     \}}
\DoxyCodeLine{16342 }
\DoxyCodeLine{16343     \textcolor{keywordflow}{if} (k == 1)}
\DoxyCodeLine{16344     \{}
\DoxyCodeLine{16345         \textcolor{comment}{// dE+123}}
\DoxyCodeLine{16346         \textcolor{comment}{// len <= 1 + 5}}
\DoxyCodeLine{16347 }
\DoxyCodeLine{16348         buf += 1;}
\DoxyCodeLine{16349     \}}
\DoxyCodeLine{16350     \textcolor{keywordflow}{else}}
\DoxyCodeLine{16351     \{}
\DoxyCodeLine{16352         \textcolor{comment}{// d.igitsE+123}}
\DoxyCodeLine{16353         \textcolor{comment}{// len <= max\_digits10 + 1 + 5}}
\DoxyCodeLine{16354 }
\DoxyCodeLine{16355         std::memmove(buf + 2, buf + 1, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k) -\/ 1);}
\DoxyCodeLine{16356         buf[1] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{16357         buf += 1 + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(k);}
\DoxyCodeLine{16358     \}}
\DoxyCodeLine{16359 }
\DoxyCodeLine{16360     *buf++ = \textcolor{charliteral}{'e'};}
\DoxyCodeLine{16361     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a78ad745d14b79fc65714c9938981faf6}{append\_exponent}}(buf, n -\/ 1);}
\DoxyCodeLine{16362 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!get\_cached\_power\_for\_binary\_exponent@{get\_cached\_power\_for\_binary\_exponent}}
\index{get\_cached\_power\_for\_binary\_exponent@{get\_cached\_power\_for\_binary\_exponent}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{get\_cached\_power\_for\_binary\_exponent()}{get\_cached\_power\_for\_binary\_exponent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\+\_\+power}} nlohmann\+::detail\+::dtoa\+\_\+impl\+::get\+\_\+cached\+\_\+power\+\_\+for\+\_\+binary\+\_\+exponent (\begin{DoxyParamCaption}\item[{int}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

For a normalized diyfp w = f $\ast$ 2$^\wedge$e, this function returns a (normalized) cached power-\/of-\/ten c = f\+\_\+c $\ast$ 2$^\wedge$e\+\_\+c, such that the exponent of the product w $\ast$ c satisfies (Definition 3.\+2 from \mbox{[}1\mbox{]}) \begin{DoxyVerb} alpha <= e_c + e + q <= gamma.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{json_8hpp_source_l15642}{15642}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15643 \{}
\DoxyCodeLine{15644     \textcolor{comment}{// Now}}
\DoxyCodeLine{15645     \textcolor{comment}{//}}
\DoxyCodeLine{15646     \textcolor{comment}{//      alpha <= e\_c + e + q <= gamma                                    (1)}}
\DoxyCodeLine{15647     \textcolor{comment}{//      ==> f\_c * 2\string^alpha <= c * 2\string^e * 2\string^q}}
\DoxyCodeLine{15648     \textcolor{comment}{//}}
\DoxyCodeLine{15649     \textcolor{comment}{// and since the c's are normalized, 2\string^(q-\/1) <= f\_c,}}
\DoxyCodeLine{15650     \textcolor{comment}{//}}
\DoxyCodeLine{15651     \textcolor{comment}{//      ==> 2\string^(q -\/ 1 + alpha) <= c * 2\string^(e + q)}}
\DoxyCodeLine{15652     \textcolor{comment}{//      ==> 2\string^(alpha -\/ e -\/ 1) <= c}}
\DoxyCodeLine{15653     \textcolor{comment}{//}}
\DoxyCodeLine{15654     \textcolor{comment}{// If c were an exact power of ten, i.e. c = 10\string^k, one may determine k as}}
\DoxyCodeLine{15655     \textcolor{comment}{//}}
\DoxyCodeLine{15656     \textcolor{comment}{//      k = ceil( log\_10( 2\string^(alpha -\/ e -\/ 1) ) )}}
\DoxyCodeLine{15657     \textcolor{comment}{//        = ceil( (alpha -\/ e -\/ 1) * log\_10(2) )}}
\DoxyCodeLine{15658     \textcolor{comment}{//}}
\DoxyCodeLine{15659     \textcolor{comment}{// From the paper:}}
\DoxyCodeLine{15660     \textcolor{comment}{// "{}In theory the result of the procedure could be wrong since c is rounded,}}
\DoxyCodeLine{15661     \textcolor{comment}{//  and the computation itself is approximated [...]. In practice, however,}}
\DoxyCodeLine{15662     \textcolor{comment}{//  this simple function is sufficient."{}}}
\DoxyCodeLine{15663     \textcolor{comment}{//}}
\DoxyCodeLine{15664     \textcolor{comment}{// For IEEE double precision floating-\/point numbers converted into}}
\DoxyCodeLine{15665     \textcolor{comment}{// normalized diyfp's w = f * 2\string^e, with q = 64,}}
\DoxyCodeLine{15666     \textcolor{comment}{//}}
\DoxyCodeLine{15667     \textcolor{comment}{//      e >= -\/1022      (min IEEE exponent)}}
\DoxyCodeLine{15668     \textcolor{comment}{//           -\/52        (p -\/ 1)}}
\DoxyCodeLine{15669     \textcolor{comment}{//           -\/52        (p -\/ 1, possibly normalize denormal IEEE numbers)}}
\DoxyCodeLine{15670     \textcolor{comment}{//           -\/11        (normalize the diyfp)}}
\DoxyCodeLine{15671     \textcolor{comment}{//         = -\/1137}}
\DoxyCodeLine{15672     \textcolor{comment}{//}}
\DoxyCodeLine{15673     \textcolor{comment}{// and}}
\DoxyCodeLine{15674     \textcolor{comment}{//}}
\DoxyCodeLine{15675     \textcolor{comment}{//      e <= +1023      (max IEEE exponent)}}
\DoxyCodeLine{15676     \textcolor{comment}{//           -\/52        (p -\/ 1)}}
\DoxyCodeLine{15677     \textcolor{comment}{//           -\/11        (normalize the diyfp)}}
\DoxyCodeLine{15678     \textcolor{comment}{//         = 960}}
\DoxyCodeLine{15679     \textcolor{comment}{//}}
\DoxyCodeLine{15680     \textcolor{comment}{// This binary exponent range [-\/1137,960] results in a decimal exponent}}
\DoxyCodeLine{15681     \textcolor{comment}{// range [-\/307,324]. One does not need to store a cached power for each}}
\DoxyCodeLine{15682     \textcolor{comment}{// k in this range. For each such k it suffices to find a cached power}}
\DoxyCodeLine{15683     \textcolor{comment}{// such that the exponent of the product lies in [alpha,gamma].}}
\DoxyCodeLine{15684     \textcolor{comment}{// This implies that the difference of the decimal exponents of adjacent}}
\DoxyCodeLine{15685     \textcolor{comment}{// table entries must be less than or equal to}}
\DoxyCodeLine{15686     \textcolor{comment}{//}}
\DoxyCodeLine{15687     \textcolor{comment}{//      floor( (gamma -\/ alpha) * log\_10(2) ) = 8.}}
\DoxyCodeLine{15688     \textcolor{comment}{//}}
\DoxyCodeLine{15689     \textcolor{comment}{// (A smaller distance gamma-\/alpha would require a larger table.)}}
\DoxyCodeLine{15690 }
\DoxyCodeLine{15691     \textcolor{comment}{// NB:}}
\DoxyCodeLine{15692     \textcolor{comment}{// Actually this function returns c, such that -\/60 <= e\_c + e + 64 <= -\/34.}}
\DoxyCodeLine{15693 }
\DoxyCodeLine{15694     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} kCachedPowersMinDecExp = -\/300;}
\DoxyCodeLine{15695     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} kCachedPowersDecStep = 8;}
\DoxyCodeLine{15696 }
\DoxyCodeLine{15697     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} std::array<cached\_power, 79> kCachedPowers =}
\DoxyCodeLine{15698     \{}
\DoxyCodeLine{15699         \{}
\DoxyCodeLine{15700             \{ 0xAB70FE17C79AC6CA, -\/1060, -\/300 \},}
\DoxyCodeLine{15701             \{ 0xFF77B1FCBEBCDC4F, -\/1034, -\/292 \},}
\DoxyCodeLine{15702             \{ 0xBE5691EF416BD60C, -\/1007, -\/284 \},}
\DoxyCodeLine{15703             \{ 0x8DD01FAD907FFC3C,  -\/980, -\/276 \},}
\DoxyCodeLine{15704             \{ 0xD3515C2831559A83,  -\/954, -\/268 \},}
\DoxyCodeLine{15705             \{ 0x9D71AC8FADA6C9B5,  -\/927, -\/260 \},}
\DoxyCodeLine{15706             \{ 0xEA9C227723EE8BCB,  -\/901, -\/252 \},}
\DoxyCodeLine{15707             \{ 0xAECC49914078536D,  -\/874, -\/244 \},}
\DoxyCodeLine{15708             \{ 0x823C12795DB6CE57,  -\/847, -\/236 \},}
\DoxyCodeLine{15709             \{ 0xC21094364DFB5637,  -\/821, -\/228 \},}
\DoxyCodeLine{15710             \{ 0x9096EA6F3848984F,  -\/794, -\/220 \},}
\DoxyCodeLine{15711             \{ 0xD77485CB25823AC7,  -\/768, -\/212 \},}
\DoxyCodeLine{15712             \{ 0xA086CFCD97BF97F4,  -\/741, -\/204 \},}
\DoxyCodeLine{15713             \{ 0xEF340A98172AACE5,  -\/715, -\/196 \},}
\DoxyCodeLine{15714             \{ 0xB23867FB2A35B28E,  -\/688, -\/188 \},}
\DoxyCodeLine{15715             \{ 0x84C8D4DFD2C63F3B,  -\/661, -\/180 \},}
\DoxyCodeLine{15716             \{ 0xC5DD44271AD3CDBA,  -\/635, -\/172 \},}
\DoxyCodeLine{15717             \{ 0x936B9FCEBB25C996,  -\/608, -\/164 \},}
\DoxyCodeLine{15718             \{ 0xDBAC6C247D62A584,  -\/582, -\/156 \},}
\DoxyCodeLine{15719             \{ 0xA3AB66580D5FDAF6,  -\/555, -\/148 \},}
\DoxyCodeLine{15720             \{ 0xF3E2F893DEC3F126,  -\/529, -\/140 \},}
\DoxyCodeLine{15721             \{ 0xB5B5ADA8AAFF80B8,  -\/502, -\/132 \},}
\DoxyCodeLine{15722             \{ 0x87625F056C7C4A8B,  -\/475, -\/124 \},}
\DoxyCodeLine{15723             \{ 0xC9BCFF6034C13053,  -\/449, -\/116 \},}
\DoxyCodeLine{15724             \{ 0x964E858C91BA2655,  -\/422, -\/108 \},}
\DoxyCodeLine{15725             \{ 0xDFF9772470297EBD,  -\/396, -\/100 \},}
\DoxyCodeLine{15726             \{ 0xA6DFBD9FB8E5B88F,  -\/369,  -\/92 \},}
\DoxyCodeLine{15727             \{ 0xF8A95FCF88747D94,  -\/343,  -\/84 \},}
\DoxyCodeLine{15728             \{ 0xB94470938FA89BCF,  -\/316,  -\/76 \},}
\DoxyCodeLine{15729             \{ 0x8A08F0F8BF0F156B,  -\/289,  -\/68 \},}
\DoxyCodeLine{15730             \{ 0xCDB02555653131B6,  -\/263,  -\/60 \},}
\DoxyCodeLine{15731             \{ 0x993FE2C6D07B7FAC,  -\/236,  -\/52 \},}
\DoxyCodeLine{15732             \{ 0xE45C10C42A2B3B06,  -\/210,  -\/44 \},}
\DoxyCodeLine{15733             \{ 0xAA242499697392D3,  -\/183,  -\/36 \},}
\DoxyCodeLine{15734             \{ 0xFD87B5F28300CA0E,  -\/157,  -\/28 \},}
\DoxyCodeLine{15735             \{ 0xBCE5086492111AEB,  -\/130,  -\/20 \},}
\DoxyCodeLine{15736             \{ 0x8CBCCC096F5088CC,  -\/103,  -\/12 \},}
\DoxyCodeLine{15737             \{ 0xD1B71758E219652C,   -\/77,   -\/4 \},}
\DoxyCodeLine{15738             \{ 0x9C40000000000000,   -\/50,    4 \},}
\DoxyCodeLine{15739             \{ 0xE8D4A51000000000,   -\/24,   12 \},}
\DoxyCodeLine{15740             \{ 0xAD78EBC5AC620000,     3,   20 \},}
\DoxyCodeLine{15741             \{ 0x813F3978F8940984,    30,   28 \},}
\DoxyCodeLine{15742             \{ 0xC097CE7BC90715B3,    56,   36 \},}
\DoxyCodeLine{15743             \{ 0x8F7E32CE7BEA5C70,    83,   44 \},}
\DoxyCodeLine{15744             \{ 0xD5D238A4ABE98068,   109,   52 \},}
\DoxyCodeLine{15745             \{ 0x9F4F2726179A2245,   136,   60 \},}
\DoxyCodeLine{15746             \{ 0xED63A231D4C4FB27,   162,   68 \},}
\DoxyCodeLine{15747             \{ 0xB0DE65388CC8ADA8,   189,   76 \},}
\DoxyCodeLine{15748             \{ 0x83C7088E1AAB65DB,   216,   84 \},}
\DoxyCodeLine{15749             \{ 0xC45D1DF942711D9A,   242,   92 \},}
\DoxyCodeLine{15750             \{ 0x924D692CA61BE758,   269,  100 \},}
\DoxyCodeLine{15751             \{ 0xDA01EE641A708DEA,   295,  108 \},}
\DoxyCodeLine{15752             \{ 0xA26DA3999AEF774A,   322,  116 \},}
\DoxyCodeLine{15753             \{ 0xF209787BB47D6B85,   348,  124 \},}
\DoxyCodeLine{15754             \{ 0xB454E4A179DD1877,   375,  132 \},}
\DoxyCodeLine{15755             \{ 0x865B86925B9BC5C2,   402,  140 \},}
\DoxyCodeLine{15756             \{ 0xC83553C5C8965D3D,   428,  148 \},}
\DoxyCodeLine{15757             \{ 0x952AB45CFA97A0B3,   455,  156 \},}
\DoxyCodeLine{15758             \{ 0xDE469FBD99A05FE3,   481,  164 \},}
\DoxyCodeLine{15759             \{ 0xA59BC234DB398C25,   508,  172 \},}
\DoxyCodeLine{15760             \{ 0xF6C69A72A3989F5C,   534,  180 \},}
\DoxyCodeLine{15761             \{ 0xB7DCBF5354E9BECE,   561,  188 \},}
\DoxyCodeLine{15762             \{ 0x88FCF317F22241E2,   588,  196 \},}
\DoxyCodeLine{15763             \{ 0xCC20CE9BD35C78A5,   614,  204 \},}
\DoxyCodeLine{15764             \{ 0x98165AF37B2153DF,   641,  212 \},}
\DoxyCodeLine{15765             \{ 0xE2A0B5DC971F303A,   667,  220 \},}
\DoxyCodeLine{15766             \{ 0xA8D9D1535CE3B396,   694,  228 \},}
\DoxyCodeLine{15767             \{ 0xFB9B7CD9A4A7443C,   720,  236 \},}
\DoxyCodeLine{15768             \{ 0xBB764C4CA7A44410,   747,  244 \},}
\DoxyCodeLine{15769             \{ 0x8BAB8EEFB6409C1A,   774,  252 \},}
\DoxyCodeLine{15770             \{ 0xD01FEF10A657842C,   800,  260 \},}
\DoxyCodeLine{15771             \{ 0x9B10A4E5E9913129,   827,  268 \},}
\DoxyCodeLine{15772             \{ 0xE7109BFBA19C0C9D,   853,  276 \},}
\DoxyCodeLine{15773             \{ 0xAC2820D9623BF429,   880,  284 \},}
\DoxyCodeLine{15774             \{ 0x80444B5E7AA7CF85,   907,  292 \},}
\DoxyCodeLine{15775             \{ 0xBF21E44003ACDD2D,   933,  300 \},}
\DoxyCodeLine{15776             \{ 0x8E679C2F5E44FF8F,   960,  308 \},}
\DoxyCodeLine{15777             \{ 0xD433179D9C8CB841,   986,  316 \},}
\DoxyCodeLine{15778             \{ 0x9E19DB92B4E31BA9,  1013,  324 \},}
\DoxyCodeLine{15779         \}}
\DoxyCodeLine{15780     \};}
\DoxyCodeLine{15781 }
\DoxyCodeLine{15782     \textcolor{comment}{// This computation gives exactly the same results for k as}}
\DoxyCodeLine{15783     \textcolor{comment}{//      k = ceil((kAlpha -\/ e -\/ 1) * 0.30102999566398114)}}
\DoxyCodeLine{15784     \textcolor{comment}{// for |e| <= 1500, but doesn't require floating-\/point operations.}}
\DoxyCodeLine{15785     \textcolor{comment}{// NB: log\_10(2) \string~= 78913 / 2\string^18}}
\DoxyCodeLine{15786     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e >= -\/1500);}
\DoxyCodeLine{15787     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(e <=  1500);}
\DoxyCodeLine{15788     \textcolor{keyword}{const} \textcolor{keywordtype}{int} f = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} -\/ e -\/ 1;}
\DoxyCodeLine{15789     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = (f * 78913) / (1 << 18) + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(f > 0);}
\DoxyCodeLine{15790 }
\DoxyCodeLine{15791     \textcolor{keyword}{const} \textcolor{keywordtype}{int} index = (-\/kCachedPowersMinDecExp + k + (kCachedPowersDecStep -\/ 1)) / kCachedPowersDecStep;}
\DoxyCodeLine{15792     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(index >= 0);}
\DoxyCodeLine{15793     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(index) < kCachedPowers.size());}
\DoxyCodeLine{15794 }
\DoxyCodeLine{15795     \textcolor{keyword}{const} cached\_power cached = kCachedPowers[\textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(index)];}
\DoxyCodeLine{15796     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} <= cached.e + e + 64);}
\DoxyCodeLine{15797     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}} >= cached.e + e + 64);}
\DoxyCodeLine{15798 }
\DoxyCodeLine{15799     \textcolor{keywordflow}{return} cached;}
\DoxyCodeLine{15800 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2@{grisu2}}
\index{grisu2@{grisu2}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2()}{grisu2()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2 (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int \&}]{len,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{m\+\_\+minus,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{v,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{m\+\_\+plus }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.\+e. \texorpdfstring{$>$}{>}= max\+\_\+digits10. 

Definition at line \mbox{\hyperlink{json_8hpp_source_l16142}{16142}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{16144 \{}
\DoxyCodeLine{16145     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} == m\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{16146     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} == v.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{16147 }
\DoxyCodeLine{16148     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/    (A)}}
\DoxyCodeLine{16149     \textcolor{comment}{//          m-\/                      v                       m+}}
\DoxyCodeLine{16150     \textcolor{comment}{//}}
\DoxyCodeLine{16151     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/    (B)}}
\DoxyCodeLine{16152     \textcolor{comment}{//                      m-\/          v                       m+}}
\DoxyCodeLine{16153     \textcolor{comment}{//}}
\DoxyCodeLine{16154     \textcolor{comment}{// First scale v (and m-\/ and m+) such that the exponent is in the range}}
\DoxyCodeLine{16155     \textcolor{comment}{// [alpha, gamma].}}
\DoxyCodeLine{16156 }
\DoxyCodeLine{16157     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power}{cached\_power}} cached = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b}{get\_cached\_power\_for\_binary\_exponent}}(m\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{16158 }
\DoxyCodeLine{16159     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} c\_minus\_k(cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a21ae81f515f5b08d5bf423775ee56074}{f}}, cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a9e89bc89bb7bf4361f43ea27eed91d23}{e}}); \textcolor{comment}{// = c \string~= 10\string^-\/k}}
\DoxyCodeLine{16160 }
\DoxyCodeLine{16161     \textcolor{comment}{// The exponent of the products is = v.e + c\_minus\_k.e + q and is in the range [alpha,gamma]}}
\DoxyCodeLine{16162     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w       = diyfp::mul(v,       c\_minus\_k);}
\DoxyCodeLine{16163     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w\_minus = diyfp::mul(m\_minus, c\_minus\_k);}
\DoxyCodeLine{16164     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} w\_plus  = diyfp::mul(m\_plus,  c\_minus\_k);}
\DoxyCodeLine{16165 }
\DoxyCodeLine{16166     \textcolor{comment}{//  -\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/}}
\DoxyCodeLine{16167     \textcolor{comment}{//          w-\/                      w                       w+}}
\DoxyCodeLine{16168     \textcolor{comment}{//          = c*m-\/                  = c*v                   = c*m+}}
\DoxyCodeLine{16169     \textcolor{comment}{//}}
\DoxyCodeLine{16170     \textcolor{comment}{// diyfp::mul rounds its result and c\_minus\_k is approximated too. w, w-\/ and}}
\DoxyCodeLine{16171     \textcolor{comment}{// w+ are now off by a small amount.}}
\DoxyCodeLine{16172     \textcolor{comment}{// In fact:}}
\DoxyCodeLine{16173     \textcolor{comment}{//}}
\DoxyCodeLine{16174     \textcolor{comment}{//      w -\/ v * 10\string^k < 1 ulp}}
\DoxyCodeLine{16175     \textcolor{comment}{//}}
\DoxyCodeLine{16176     \textcolor{comment}{// To account for this inaccuracy, add resp. subtract 1 ulp.}}
\DoxyCodeLine{16177     \textcolor{comment}{//}}
\DoxyCodeLine{16178     \textcolor{comment}{//  -\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/(-\/-\/-\/+-\/-\/-\/)-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{16179     \textcolor{comment}{//          w-\/  M-\/                  w                   M+  w+}}
\DoxyCodeLine{16180     \textcolor{comment}{//}}
\DoxyCodeLine{16181     \textcolor{comment}{// Now any number in [M-\/, M+] (bounds included) will round to w when input,}}
\DoxyCodeLine{16182     \textcolor{comment}{// regardless of how the input rounding algorithm breaks ties.}}
\DoxyCodeLine{16183     \textcolor{comment}{//}}
\DoxyCodeLine{16184     \textcolor{comment}{// And digit\_gen generates the shortest possible such number in [M-\/, M+].}}
\DoxyCodeLine{16185     \textcolor{comment}{// Note that this does not mean that Grisu2 always generates the shortest}}
\DoxyCodeLine{16186     \textcolor{comment}{// possible number in the interval (m-\/, m+).}}
\DoxyCodeLine{16187     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\_minus(w\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} + 1, w\_minus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{16188     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} M\_plus (w\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}}  -\/ 1, w\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} );}
\DoxyCodeLine{16189 }
\DoxyCodeLine{16190     decimal\_exponent = -\/cached.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power_a8c1f2efed643eeaa8fae83c697a29c6a}{k}}; \textcolor{comment}{// = -\/(-\/k) = k}}
\DoxyCodeLine{16191 }
\DoxyCodeLine{16192     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}{grisu2\_digit\_gen}}(buf, len, decimal\_exponent, M\_minus, w, M\_plus);}
\DoxyCodeLine{16193 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2@{grisu2}}
\index{grisu2@{grisu2}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2()}{grisu2()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Float\+Type $>$ \\
void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2 (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int \&}]{len,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{Float\+Type}]{value }\end{DoxyParamCaption})}

v = buf $\ast$ 10$^\wedge$decimal\+\_\+exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.\+e. \texorpdfstring{$>$}{>}= max\+\_\+digits10. 

Definition at line \mbox{\hyperlink{json_8hpp_source_l16202}{16202}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{16203 \{}
\DoxyCodeLine{16204     \textcolor{keyword}{static\_assert}(diyfp::kPrecision >= std::numeric\_limits<FloatType>::digits + 3,}
\DoxyCodeLine{16205                   \textcolor{stringliteral}{"{}internal error: not enough precision"{}});}
\DoxyCodeLine{16206 }
\DoxyCodeLine{16207     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(std::isfinite(value));}
\DoxyCodeLine{16208     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(value > 0);}
\DoxyCodeLine{16209 }
\DoxyCodeLine{16210     \textcolor{comment}{// If the neighbors (and boundaries) of 'value' are always computed for double-\/precision}}
\DoxyCodeLine{16211     \textcolor{comment}{// numbers, all float's can be recovered using strtod (and strtof). However, the resulting}}
\DoxyCodeLine{16212     \textcolor{comment}{// decimal representations are not exactly "{}short"{}.}}
\DoxyCodeLine{16213     \textcolor{comment}{//}}
\DoxyCodeLine{16214     \textcolor{comment}{// The documentation for 'std::to\_chars' (https://en.cppreference.com/w/cpp/utility/to\_chars)}}
\DoxyCodeLine{16215     \textcolor{comment}{// says "{}value is converted to a string as if by std::sprintf in the default ("{}C"{}) locale"{}}}
\DoxyCodeLine{16216     \textcolor{comment}{// and since sprintf promotes float's to double's, I think this is exactly what 'std::to\_chars'}}
\DoxyCodeLine{16217     \textcolor{comment}{// does.}}
\DoxyCodeLine{16218     \textcolor{comment}{// On the other hand, the documentation for 'std::to\_chars' requires that "{}parsing the}}
\DoxyCodeLine{16219     \textcolor{comment}{// representation using the corresponding std::from\_chars function recovers value exactly"{}. That}}
\DoxyCodeLine{16220     \textcolor{comment}{// indicates that single precision floating-\/point numbers should be recovered using}}
\DoxyCodeLine{16221     \textcolor{comment}{// 'std::strtof'.}}
\DoxyCodeLine{16222     \textcolor{comment}{//}}
\DoxyCodeLine{16223     \textcolor{comment}{// NB: If the neighbors are computed for single-\/precision numbers, there is a single float}}
\DoxyCodeLine{16224     \textcolor{comment}{//     (7.0385307e-\/26f) which can't be recovered using strtod. The resulting double precision}}
\DoxyCodeLine{16225     \textcolor{comment}{//     value is off by 1 ulp.}}
\DoxyCodeLine{16226 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{16227     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} w = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\_boundaries}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{16228 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{16229     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries}{boundaries}} w = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded}{compute\_boundaries}}(value);}
\DoxyCodeLine{16230 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{16231 }
\DoxyCodeLine{16232     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b}{grisu2}}(buf, len, decimal\_exponent, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_aec4e5028333c01f3229062f31ce16763}{minus}}, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_ad1668c60aeade5f2557fafed8b8aee1a}{w}}, w.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries_a3321ae2816a6ec5250a0d8e29f798232}{plus}});}
\DoxyCodeLine{16233 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2\_digit\_gen@{grisu2\_digit\_gen}}
\index{grisu2\_digit\_gen@{grisu2\_digit\_gen}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2\_digit\_gen()}{grisu2\_digit\_gen()}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2\+\_\+digit\+\_\+gen (\begin{DoxyParamCaption}\item[{char $\ast$}]{buffer,  }\item[{int \&}]{length,  }\item[{int \&}]{decimal\+\_\+exponent,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{M\+\_\+minus,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{w,  }\item[{\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}}}]{M\+\_\+plus }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Generates V = buffer $\ast$ 10$^\wedge$decimal\+\_\+exponent, such that M-\/ \texorpdfstring{$<$}{<}= V \texorpdfstring{$<$}{<}= M+. M-\/ and M+ must be normalized and share the same exponent -\/60 \texorpdfstring{$<$}{<}= e \texorpdfstring{$<$}{<}= -\/32. 

Definition at line \mbox{\hyperlink{json_8hpp_source_l15901}{15901}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15903 \{}
\DoxyCodeLine{15904     \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}} >= -\/60, \textcolor{stringliteral}{"{}internal error"{}});}
\DoxyCodeLine{15905     \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}} <= -\/32, \textcolor{stringliteral}{"{}internal error"{}});}
\DoxyCodeLine{15906 }
\DoxyCodeLine{15907     \textcolor{comment}{// Generates the digits (and the exponent) of a decimal floating-\/point}}
\DoxyCodeLine{15908     \textcolor{comment}{// number V = buffer * 10\string^decimal\_exponent in the range [M-\/, M+]. The diyfp's}}
\DoxyCodeLine{15909     \textcolor{comment}{// w, M-\/ and M+ share the same exponent e, which satisfies alpha <= e <= gamma.}}
\DoxyCodeLine{15910     \textcolor{comment}{//}}
\DoxyCodeLine{15911     \textcolor{comment}{//               <-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ delta -\/-\/-\/-\/>}}
\DoxyCodeLine{15912     \textcolor{comment}{//                                  <-\/-\/-\/-\/ dist -\/-\/-\/-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{15913     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15914     \textcolor{comment}{//               M-\/                 w                   M+}}
\DoxyCodeLine{15915     \textcolor{comment}{//}}
\DoxyCodeLine{15916     \textcolor{comment}{// Grisu2 generates the digits of M+ from left to right and stops as soon as}}
\DoxyCodeLine{15917     \textcolor{comment}{// V is in [M-\/,M+].}}
\DoxyCodeLine{15918 }
\DoxyCodeLine{15919     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} >= \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}{kAlpha}});}
\DoxyCodeLine{15920     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}} <= \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}{kGamma}});}
\DoxyCodeLine{15921 }
\DoxyCodeLine{15922     std::uint64\_t delta = diyfp::sub(M\_plus, M\_minus).f; \textcolor{comment}{// (significand of (M+ -\/ M-\/), implicit exponent is e)}}
\DoxyCodeLine{15923     std::uint64\_t dist  = diyfp::sub(M\_plus, w      ).f; \textcolor{comment}{// (significand of (M+ -\/ w ), implicit exponent is e)}}
\DoxyCodeLine{15924 }
\DoxyCodeLine{15925     \textcolor{comment}{// Split M+ = f * 2\string^e into two parts p1 and p2 (note: e < 0):}}
\DoxyCodeLine{15926     \textcolor{comment}{//}}
\DoxyCodeLine{15927     \textcolor{comment}{//      M+ = f * 2\string^e}}
\DoxyCodeLine{15928     \textcolor{comment}{//         = ((f div 2\string^-\/e) * 2\string^-\/e + (f mod 2\string^-\/e)) * 2\string^e}}
\DoxyCodeLine{15929     \textcolor{comment}{//         = ((p1        ) * 2\string^-\/e + (p2        )) * 2\string^e}}
\DoxyCodeLine{15930     \textcolor{comment}{//         = p1 + p2 * 2\string^e}}
\DoxyCodeLine{15931 }
\DoxyCodeLine{15932     \textcolor{keyword}{const} \mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp}{diyfp}} one(std::uint64\_t\{1\} << -\/M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}}, M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_ae22e170815983961447c429f324c944d}{e}});}
\DoxyCodeLine{15933 }
\DoxyCodeLine{15934     \textcolor{keyword}{auto} p1 = \textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} >> -\/one.e); \textcolor{comment}{// p1 = f div 2\string^-\/e (Since -\/e >= 32, p1 fits into a 32-\/bit int.)}}
\DoxyCodeLine{15935     std::uint64\_t p2 = M\_plus.\mbox{\hyperlink{structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp_aea90459e340a231ca31d46946803ef51}{f}} \& (one.f -\/ 1);                    \textcolor{comment}{// p2 = f mod 2\string^-\/e}}
\DoxyCodeLine{15936 }
\DoxyCodeLine{15937     \textcolor{comment}{// 1)}}
\DoxyCodeLine{15938     \textcolor{comment}{//}}
\DoxyCodeLine{15939     \textcolor{comment}{// Generate the digits of the integral part p1 = d[n-\/1]...d[1]d[0]}}
\DoxyCodeLine{15940 }
\DoxyCodeLine{15941     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p1 > 0);}
\DoxyCodeLine{15942 }
\DoxyCodeLine{15943     std::uint32\_t pow10\{\};}
\DoxyCodeLine{15944     \textcolor{keyword}{const} \textcolor{keywordtype}{int} k = \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a36ded358763b5dbcea9867660fbe4e28}{find\_largest\_pow10}}(p1, pow10);}
\DoxyCodeLine{15945 }
\DoxyCodeLine{15946     \textcolor{comment}{//      10\string^(k-\/1) <= p1 < 10\string^k, pow10 = 10\string^(k-\/1)}}
\DoxyCodeLine{15947     \textcolor{comment}{//}}
\DoxyCodeLine{15948     \textcolor{comment}{//      p1 = (p1 div 10\string^(k-\/1)) * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))}}
\DoxyCodeLine{15949     \textcolor{comment}{//         = (d[k-\/1]         ) * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))}}
\DoxyCodeLine{15950     \textcolor{comment}{//}}
\DoxyCodeLine{15951     \textcolor{comment}{//      M+ = p1                                             + p2 * 2\string^e}}
\DoxyCodeLine{15952     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + (p1 mod 10\string^(k-\/1))          + p2 * 2\string^e}}
\DoxyCodeLine{15953     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + ((p1 mod 10\string^(k-\/1)) * 2\string^-\/e + p2) * 2\string^e}}
\DoxyCodeLine{15954     \textcolor{comment}{//         = d[k-\/1] * 10\string^(k-\/1) + (                         rest) * 2\string^e}}
\DoxyCodeLine{15955     \textcolor{comment}{//}}
\DoxyCodeLine{15956     \textcolor{comment}{// Now generate the digits d[n] of p1 from left to right (n = k-\/1,...,0)}}
\DoxyCodeLine{15957     \textcolor{comment}{//}}
\DoxyCodeLine{15958     \textcolor{comment}{//      p1 = d[k-\/1]...d[n] * 10\string^n + d[n-\/1]...d[0]}}
\DoxyCodeLine{15959     \textcolor{comment}{//}}
\DoxyCodeLine{15960     \textcolor{comment}{// but stop as soon as}}
\DoxyCodeLine{15961     \textcolor{comment}{//}}
\DoxyCodeLine{15962     \textcolor{comment}{//      rest * 2\string^e = (d[n-\/1]...d[0] * 2\string^-\/e + p2) * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{15963 }
\DoxyCodeLine{15964     \textcolor{keywordtype}{int} n = k;}
\DoxyCodeLine{15965     \textcolor{keywordflow}{while} (n > 0)}
\DoxyCodeLine{15966     \{}
\DoxyCodeLine{15967         \textcolor{comment}{// Invariants:}}
\DoxyCodeLine{15968         \textcolor{comment}{//      M+ = buffer * 10\string^n + (p1 + p2 * 2\string^e)    (buffer = 0 for n = k)}}
\DoxyCodeLine{15969         \textcolor{comment}{//      pow10 = 10\string^(n-\/1) <= p1 < 10\string^n}}
\DoxyCodeLine{15970         \textcolor{comment}{//}}
\DoxyCodeLine{15971         \textcolor{keyword}{const} std::uint32\_t d = p1 / pow10;  \textcolor{comment}{// d = p1 div 10\string^(n-\/1)}}
\DoxyCodeLine{15972         \textcolor{keyword}{const} std::uint32\_t r = p1 \% pow10;  \textcolor{comment}{// r = p1 mod 10\string^(n-\/1)}}
\DoxyCodeLine{15973         \textcolor{comment}{//}}
\DoxyCodeLine{15974         \textcolor{comment}{//      M+ = buffer * 10\string^n + (d * 10\string^(n-\/1) + r) + p2 * 2\string^e}}
\DoxyCodeLine{15975         \textcolor{comment}{//         = (buffer * 10 + d) * 10\string^(n-\/1) + (r + p2 * 2\string^e)}}
\DoxyCodeLine{15976         \textcolor{comment}{//}}
\DoxyCodeLine{15977         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(d <= 9);}
\DoxyCodeLine{15978         buffer[length++] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + d); \textcolor{comment}{// buffer := buffer * 10 + d}}
\DoxyCodeLine{15979         \textcolor{comment}{//}}
\DoxyCodeLine{15980         \textcolor{comment}{//      M+ = buffer * 10\string^(n-\/1) + (r + p2 * 2\string^e)}}
\DoxyCodeLine{15981         \textcolor{comment}{//}}
\DoxyCodeLine{15982         p1 = r;}
\DoxyCodeLine{15983         n-\/-\/;}
\DoxyCodeLine{15984         \textcolor{comment}{//}}
\DoxyCodeLine{15985         \textcolor{comment}{//      M+ = buffer * 10\string^n + (p1 + p2 * 2\string^e)}}
\DoxyCodeLine{15986         \textcolor{comment}{//      pow10 = 10\string^n}}
\DoxyCodeLine{15987         \textcolor{comment}{//}}
\DoxyCodeLine{15988 }
\DoxyCodeLine{15989         \textcolor{comment}{// Now check if enough digits have been generated.}}
\DoxyCodeLine{15990         \textcolor{comment}{// Compute}}
\DoxyCodeLine{15991         \textcolor{comment}{//}}
\DoxyCodeLine{15992         \textcolor{comment}{//      p1 + p2 * 2\string^e = (p1 * 2\string^-\/e + p2) * 2\string^e = rest * 2\string^e}}
\DoxyCodeLine{15993         \textcolor{comment}{//}}
\DoxyCodeLine{15994         \textcolor{comment}{// Note:}}
\DoxyCodeLine{15995         \textcolor{comment}{// Since rest and delta share the same exponent e, it suffices to}}
\DoxyCodeLine{15996         \textcolor{comment}{// compare the significands.}}
\DoxyCodeLine{15997         \textcolor{keyword}{const} std::uint64\_t rest = (std::uint64\_t\{p1\} << -\/one.e) + p2;}
\DoxyCodeLine{15998         \textcolor{keywordflow}{if} (rest <= delta)}
\DoxyCodeLine{15999         \{}
\DoxyCodeLine{16000             \textcolor{comment}{// V = buffer * 10\string^n, with M-\/ <= V <= M+.}}
\DoxyCodeLine{16001 }
\DoxyCodeLine{16002             decimal\_exponent += n;}
\DoxyCodeLine{16003 }
\DoxyCodeLine{16004             \textcolor{comment}{// We may now just stop. But instead look if the buffer could be}}
\DoxyCodeLine{16005             \textcolor{comment}{// decremented to bring V closer to w.}}
\DoxyCodeLine{16006             \textcolor{comment}{//}}
\DoxyCodeLine{16007             \textcolor{comment}{// pow10 = 10\string^n is now 1 ulp in the decimal representation V.}}
\DoxyCodeLine{16008             \textcolor{comment}{// The rounding procedure works with diyfp's with an implicit}}
\DoxyCodeLine{16009             \textcolor{comment}{// exponent of e.}}
\DoxyCodeLine{16010             \textcolor{comment}{//}}
\DoxyCodeLine{16011             \textcolor{comment}{//      10\string^n = (10\string^n * 2\string^-\/e) * 2\string^e = ulp * 2\string^e}}
\DoxyCodeLine{16012             \textcolor{comment}{//}}
\DoxyCodeLine{16013             \textcolor{keyword}{const} std::uint64\_t ten\_n = std::uint64\_t\{pow10\} << -\/one.e;}
\DoxyCodeLine{16014             \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\_round}}(buffer, length, dist, delta, rest, ten\_n);}
\DoxyCodeLine{16015 }
\DoxyCodeLine{16016             \textcolor{keywordflow}{return};}
\DoxyCodeLine{16017         \}}
\DoxyCodeLine{16018 }
\DoxyCodeLine{16019         pow10 /= 10;}
\DoxyCodeLine{16020         \textcolor{comment}{//}}
\DoxyCodeLine{16021         \textcolor{comment}{//      pow10 = 10\string^(n-\/1) <= p1 < 10\string^n}}
\DoxyCodeLine{16022         \textcolor{comment}{// Invariants restored.}}
\DoxyCodeLine{16023     \}}
\DoxyCodeLine{16024 }
\DoxyCodeLine{16025     \textcolor{comment}{// 2)}}
\DoxyCodeLine{16026     \textcolor{comment}{//}}
\DoxyCodeLine{16027     \textcolor{comment}{// The digits of the integral part have been generated:}}
\DoxyCodeLine{16028     \textcolor{comment}{//}}
\DoxyCodeLine{16029     \textcolor{comment}{//      M+ = d[k-\/1]...d[1]d[0] + p2 * 2\string^e}}
\DoxyCodeLine{16030     \textcolor{comment}{//         = buffer            + p2 * 2\string^e}}
\DoxyCodeLine{16031     \textcolor{comment}{//}}
\DoxyCodeLine{16032     \textcolor{comment}{// Now generate the digits of the fractional part p2 * 2\string^e.}}
\DoxyCodeLine{16033     \textcolor{comment}{//}}
\DoxyCodeLine{16034     \textcolor{comment}{// Note:}}
\DoxyCodeLine{16035     \textcolor{comment}{// No decimal point is generated: the exponent is adjusted instead.}}
\DoxyCodeLine{16036     \textcolor{comment}{//}}
\DoxyCodeLine{16037     \textcolor{comment}{// p2 actually represents the fraction}}
\DoxyCodeLine{16038     \textcolor{comment}{//}}
\DoxyCodeLine{16039     \textcolor{comment}{//      p2 * 2\string^e}}
\DoxyCodeLine{16040     \textcolor{comment}{//          = p2 / 2\string^-\/e}}
\DoxyCodeLine{16041     \textcolor{comment}{//          = d[-\/1] / 10\string^1 + d[-\/2] / 10\string^2 + ...}}
\DoxyCodeLine{16042     \textcolor{comment}{//}}
\DoxyCodeLine{16043     \textcolor{comment}{// Now generate the digits d[-\/m] of p1 from left to right (m = 1,2,...)}}
\DoxyCodeLine{16044     \textcolor{comment}{//}}
\DoxyCodeLine{16045     \textcolor{comment}{//      p2 * 2\string^e = d[-\/1]d[-\/2]...d[-\/m] * 10\string^-\/m}}
\DoxyCodeLine{16046     \textcolor{comment}{//                      + 10\string^-\/m * (d[-\/m-\/1] / 10\string^1 + d[-\/m-\/2] / 10\string^2 + ...)}}
\DoxyCodeLine{16047     \textcolor{comment}{//}}
\DoxyCodeLine{16048     \textcolor{comment}{// using}}
\DoxyCodeLine{16049     \textcolor{comment}{//}}
\DoxyCodeLine{16050     \textcolor{comment}{//      10\string^m * p2 = ((10\string^m * p2) div 2\string^-\/e) * 2\string^-\/e + ((10\string^m * p2) mod 2\string^-\/e)}}
\DoxyCodeLine{16051     \textcolor{comment}{//                = (                   d) * 2\string^-\/e + (                   r)}}
\DoxyCodeLine{16052     \textcolor{comment}{//}}
\DoxyCodeLine{16053     \textcolor{comment}{// or}}
\DoxyCodeLine{16054     \textcolor{comment}{//      10\string^m * p2 * 2\string^e = d + r * 2\string^e}}
\DoxyCodeLine{16055     \textcolor{comment}{//}}
\DoxyCodeLine{16056     \textcolor{comment}{// i.e.}}
\DoxyCodeLine{16057     \textcolor{comment}{//}}
\DoxyCodeLine{16058     \textcolor{comment}{//      M+ = buffer + p2 * 2\string^e}}
\DoxyCodeLine{16059     \textcolor{comment}{//         = buffer + 10\string^-\/m * (d + r * 2\string^e)}}
\DoxyCodeLine{16060     \textcolor{comment}{//         = (buffer * 10\string^m + d) * 10\string^-\/m + 10\string^-\/m * r * 2\string^e}}
\DoxyCodeLine{16061     \textcolor{comment}{//}}
\DoxyCodeLine{16062     \textcolor{comment}{// and stop as soon as 10\string^-\/m * r * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{16063 }
\DoxyCodeLine{16064     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p2 > delta);}
\DoxyCodeLine{16065 }
\DoxyCodeLine{16066     \textcolor{keywordtype}{int} m = 0;}
\DoxyCodeLine{16067     \textcolor{keywordflow}{for} (;;)}
\DoxyCodeLine{16068     \{}
\DoxyCodeLine{16069         \textcolor{comment}{// Invariant:}}
\DoxyCodeLine{16070         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * (d[-\/m-\/1] / 10 + d[-\/m-\/2] / 10\string^2 + ...) * 2\string^e}}
\DoxyCodeLine{16071         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (p2                                 ) * 2\string^e}}
\DoxyCodeLine{16072         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (10 * p2)                   ) * 2\string^e}}
\DoxyCodeLine{16073         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * ((10*p2 div 2\string^-\/e) * 2\string^-\/e + (10*p2 mod 2\string^-\/e)) * 2\string^e}}
\DoxyCodeLine{16074         \textcolor{comment}{//}}
\DoxyCodeLine{16075         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(p2 <= (std::numeric\_limits<std::uint64\_t>::max)() / 10);}
\DoxyCodeLine{16076         p2 *= 10;}
\DoxyCodeLine{16077         \textcolor{keyword}{const} std::uint64\_t d = p2 >> -\/one.e;     \textcolor{comment}{// d = (10 * p2) div 2\string^-\/e}}
\DoxyCodeLine{16078         \textcolor{keyword}{const} std::uint64\_t r = p2 \& (one.f -\/ 1); \textcolor{comment}{// r = (10 * p2) mod 2\string^-\/e}}
\DoxyCodeLine{16079         \textcolor{comment}{//}}
\DoxyCodeLine{16080         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (d * 2\string^-\/e + r) * 2\string^e}}
\DoxyCodeLine{16081         \textcolor{comment}{//         = buffer * 10\string^-\/m + 10\string^-\/m * (1/10 * (d + r * 2\string^e))}}
\DoxyCodeLine{16082         \textcolor{comment}{//         = (buffer * 10 + d) * 10\string^(-\/m-\/1) + 10\string^(-\/m-\/1) * r * 2\string^e}}
\DoxyCodeLine{16083         \textcolor{comment}{//}}
\DoxyCodeLine{16084         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(d <= 9);}
\DoxyCodeLine{16085         buffer[length++] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'} + d); \textcolor{comment}{// buffer := buffer * 10 + d}}
\DoxyCodeLine{16086         \textcolor{comment}{//}}
\DoxyCodeLine{16087         \textcolor{comment}{//      M+ = buffer * 10\string^(-\/m-\/1) + 10\string^(-\/m-\/1) * r * 2\string^e}}
\DoxyCodeLine{16088         \textcolor{comment}{//}}
\DoxyCodeLine{16089         p2 = r;}
\DoxyCodeLine{16090         m++;}
\DoxyCodeLine{16091         \textcolor{comment}{//}}
\DoxyCodeLine{16092         \textcolor{comment}{//      M+ = buffer * 10\string^-\/m + 10\string^-\/m * p2 * 2\string^e}}
\DoxyCodeLine{16093         \textcolor{comment}{// Invariant restored.}}
\DoxyCodeLine{16094 }
\DoxyCodeLine{16095         \textcolor{comment}{// Check if enough digits have been generated.}}
\DoxyCodeLine{16096         \textcolor{comment}{//}}
\DoxyCodeLine{16097         \textcolor{comment}{//      10\string^-\/m * p2 * 2\string^e <= delta * 2\string^e}}
\DoxyCodeLine{16098         \textcolor{comment}{//              p2 * 2\string^e <= 10\string^m * delta * 2\string^e}}
\DoxyCodeLine{16099         \textcolor{comment}{//                    p2 <= 10\string^m * delta}}
\DoxyCodeLine{16100         delta *= 10;}
\DoxyCodeLine{16101         dist  *= 10;}
\DoxyCodeLine{16102         \textcolor{keywordflow}{if} (p2 <= delta)}
\DoxyCodeLine{16103         \{}
\DoxyCodeLine{16104             \textcolor{keywordflow}{break};}
\DoxyCodeLine{16105         \}}
\DoxyCodeLine{16106     \}}
\DoxyCodeLine{16107 }
\DoxyCodeLine{16108     \textcolor{comment}{// V = buffer * 10\string^-\/m, with M-\/ <= V <= M+.}}
\DoxyCodeLine{16109 }
\DoxyCodeLine{16110     decimal\_exponent -\/= m;}
\DoxyCodeLine{16111 }
\DoxyCodeLine{16112     \textcolor{comment}{// 1 ulp in the decimal representation is now 10\string^-\/m.}}
\DoxyCodeLine{16113     \textcolor{comment}{// Since delta and dist are now scaled by 10\string^m, we need to do the}}
\DoxyCodeLine{16114     \textcolor{comment}{// same with ulp in order to keep the units in sync.}}
\DoxyCodeLine{16115     \textcolor{comment}{//}}
\DoxyCodeLine{16116     \textcolor{comment}{//      10\string^m * 10\string^-\/m = 1 = 2\string^-\/e * 2\string^e = ten\_m * 2\string^e}}
\DoxyCodeLine{16117     \textcolor{comment}{//}}
\DoxyCodeLine{16118     \textcolor{keyword}{const} std::uint64\_t ten\_m = one.f;}
\DoxyCodeLine{16119     \mbox{\hyperlink{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}{grisu2\_round}}(buffer, length, dist, delta, p2, ten\_m);}
\DoxyCodeLine{16120 }
\DoxyCodeLine{16121     \textcolor{comment}{// By construction this algorithm generates the shortest possible decimal}}
\DoxyCodeLine{16122     \textcolor{comment}{// number (Loitsch, Theorem 6.2) which rounds back to w.}}
\DoxyCodeLine{16123     \textcolor{comment}{// For an input number of precision p, at least}}
\DoxyCodeLine{16124     \textcolor{comment}{//}}
\DoxyCodeLine{16125     \textcolor{comment}{//      N = 1 + ceil(p * log\_10(2))}}
\DoxyCodeLine{16126     \textcolor{comment}{//}}
\DoxyCodeLine{16127     \textcolor{comment}{// decimal digits are sufficient to identify all binary floating-\/point}}
\DoxyCodeLine{16128     \textcolor{comment}{// numbers (Matula, "{}In-\/and-\/Out conversions"{}).}}
\DoxyCodeLine{16129     \textcolor{comment}{// This implies that the algorithm does not produce more than N decimal}}
\DoxyCodeLine{16130     \textcolor{comment}{// digits.}}
\DoxyCodeLine{16131     \textcolor{comment}{//}}
\DoxyCodeLine{16132     \textcolor{comment}{//      N = 17 for p = 53 (IEEE double precision)}}
\DoxyCodeLine{16133     \textcolor{comment}{//      N = 9  for p = 24 (IEEE single precision)}}
\DoxyCodeLine{16134 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a5bc841e0bee12fd6489d49cf7bd07bb4}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!grisu2\_round@{grisu2\_round}}
\index{grisu2\_round@{grisu2\_round}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{grisu2\_round()}{grisu2\_round()}}
{\footnotesize\ttfamily void nlohmann\+::detail\+::dtoa\+\_\+impl\+::grisu2\+\_\+round (\begin{DoxyParamCaption}\item[{char $\ast$}]{buf,  }\item[{int}]{len,  }\item[{std\+::uint64\+\_\+t}]{dist,  }\item[{std\+::uint64\+\_\+t}]{delta,  }\item[{std\+::uint64\+\_\+t}]{rest,  }\item[{std\+::uint64\+\_\+t}]{ten\+\_\+k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{json_8hpp_source_l15860}{15860}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15862 \{}
\DoxyCodeLine{15863     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(len >= 1);}
\DoxyCodeLine{15864     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(dist <= delta);}
\DoxyCodeLine{15865     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(rest <= delta);}
\DoxyCodeLine{15866     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(ten\_k > 0);}
\DoxyCodeLine{15867 }
\DoxyCodeLine{15868     \textcolor{comment}{//               <-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ delta -\/-\/-\/-\/>}}
\DoxyCodeLine{15869     \textcolor{comment}{//                                  <-\/-\/-\/-\/ dist -\/-\/-\/-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{15870     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15871     \textcolor{comment}{//               M-\/                 w                   M+}}
\DoxyCodeLine{15872     \textcolor{comment}{//}}
\DoxyCodeLine{15873     \textcolor{comment}{//                                  ten\_k}}
\DoxyCodeLine{15874     \textcolor{comment}{//                                <-\/-\/-\/-\/-\/-\/>}}
\DoxyCodeLine{15875     \textcolor{comment}{//                                       <-\/-\/-\/-\/ rest -\/-\/-\/-\/>}}
\DoxyCodeLine{15876     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/[-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/]-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{15877     \textcolor{comment}{//                                  w    V}}
\DoxyCodeLine{15878     \textcolor{comment}{//                                       = buf * 10\string^k}}
\DoxyCodeLine{15879     \textcolor{comment}{//}}
\DoxyCodeLine{15880     \textcolor{comment}{// ten\_k represents a unit-\/in-\/the-\/last-\/place in the decimal representation}}
\DoxyCodeLine{15881     \textcolor{comment}{// stored in buf.}}
\DoxyCodeLine{15882     \textcolor{comment}{// Decrement buf by ten\_k while this takes buf closer to w.}}
\DoxyCodeLine{15883 }
\DoxyCodeLine{15884     \textcolor{comment}{// The tests are written in this order to avoid overflow in unsigned}}
\DoxyCodeLine{15885     \textcolor{comment}{// integer arithmetic.}}
\DoxyCodeLine{15886 }
\DoxyCodeLine{15887     \textcolor{keywordflow}{while} (rest < dist}
\DoxyCodeLine{15888             \&\& delta -\/ rest >= ten\_k}
\DoxyCodeLine{15889             \&\& (rest + ten\_k < dist || dist -\/ rest > rest + ten\_k -\/ dist))}
\DoxyCodeLine{15890     \{}
\DoxyCodeLine{15891         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(buf[len -\/ 1] != \textcolor{charliteral}{'0'});}
\DoxyCodeLine{15892         buf[len -\/ 1]-\/-\/;}
\DoxyCodeLine{15893         rest += ten\_k;}
\DoxyCodeLine{15894     \}}
\DoxyCodeLine{15895 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a1c5d30eb51e5e994a3f48bde104d2ce8}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!reinterpret\_bits@{reinterpret\_bits}}
\index{reinterpret\_bits@{reinterpret\_bits}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{reinterpret\_bits()}{reinterpret\_bits()}}
{\footnotesize\ttfamily template$<$typename Target , typename Source $>$ \\
Target nlohmann\+::detail\+::dtoa\+\_\+impl\+::reinterpret\+\_\+bits (\begin{DoxyParamCaption}\item[{const Source}]{source }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{json_8hpp_source_l15362}{15362}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{15363 \{}
\DoxyCodeLine{15364     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(Target) == \textcolor{keyword}{sizeof}(Source), \textcolor{stringliteral}{"{}size mismatch"{}});}
\DoxyCodeLine{15365 }
\DoxyCodeLine{15366     Target target;}
\DoxyCodeLine{15367     std::memcpy(\&target, \&source, \textcolor{keyword}{sizeof}(Source));}
\DoxyCodeLine{15368     \textcolor{keywordflow}{return} target;}
\DoxyCodeLine{15369 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_ac1ea1316de0b4a219f707c76b1db1966}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!kAlpha@{kAlpha}}
\index{kAlpha@{kAlpha}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{kAlpha}{kAlpha}}
{\footnotesize\ttfamily constexpr int nlohmann\+::detail\+::dtoa\+\_\+impl\+::k\+Alpha = -\/60\hspace{0.3cm}{\ttfamily [constexpr]}}



Definition at line \mbox{\hyperlink{json_8hpp_source_l15625}{15625}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.

\mbox{\Hypertarget{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}\label{namespacenlohmann_1_1detail_1_1dtoa__impl_a4a750fcc38da1ce68b7e25ab3a230e20}} 
\index{nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}!kGamma@{kGamma}}
\index{kGamma@{kGamma}!nlohmann::detail::dtoa\_impl@{nlohmann::detail::dtoa\_impl}}
\doxysubsubsection{\texorpdfstring{kGamma}{kGamma}}
{\footnotesize\ttfamily constexpr int nlohmann\+::detail\+::dtoa\+\_\+impl\+::k\+Gamma = -\/32\hspace{0.3cm}{\ttfamily [constexpr]}}



Definition at line \mbox{\hyperlink{json_8hpp_source_l15626}{15626}} of file \mbox{\hyperlink{json_8hpp_source}{json.\+hpp}}.

