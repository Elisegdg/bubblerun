\hypertarget{tiny__obj__loader_8cpp_source}{}\doxysection{tiny\+\_\+obj\+\_\+loader.\+cpp}
\label{tiny__obj__loader_8cpp_source}\index{glimac/src/tiny\_obj\_loader.cpp@{glimac/src/tiny\_obj\_loader.cpp}}
\mbox{\hyperlink{tiny__obj__loader_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00001}00001 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00002}00002 \textcolor{comment}{// Copyright 2012-\/2013, Syoyo Fujita.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00003}00003 \textcolor{comment}{// }}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00004}00004 \textcolor{comment}{// Licensed under 2-\/clause BSD liecense.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00005}00005 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00007}00007 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00008}00008 \textcolor{comment}{// version 0.9.7: Support multi-\/materials(per-\/face material ID) per object/group.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00009}00009 \textcolor{comment}{// version 0.9.6: Support Ni(index of refraction) mtl parameter.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00010}00010 \textcolor{comment}{//                Parse transmittance material parameter correctly.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00011}00011 \textcolor{comment}{// version 0.9.5: Parse multiple group name.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00012}00012 \textcolor{comment}{//                Add support of specifying the base path to load material file.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00013}00013 \textcolor{comment}{// version 0.9.4: Initial suupport of group tag(g)}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00014}00014 \textcolor{comment}{// version 0.9.3: Fix parsing triple 'x/y/z'}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00015}00015 \textcolor{comment}{// version 0.9.2: Add more .mtl load support}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00016}00016 \textcolor{comment}{// version 0.9.1: Add initial .mtl load support}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00017}00017 \textcolor{comment}{// version 0.9.0: Initial}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00018}00018 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00021}00021 \textcolor{preprocessor}{\#include <cstdlib>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00022}00022 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00025}00025 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00026}00026 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00027}00027 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00028}00028 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00029}00029 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00031}00031 \textcolor{preprocessor}{\#include "{}tiny\_obj\_loader.h"{}}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00033}\mbox{\hyperlink{namespacetinyobj}{00033}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetinyobj}{tinyobj}} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00035}\mbox{\hyperlink{structtinyobj_1_1vertex__index}{00035}} \textcolor{keyword}{struct }\mbox{\hyperlink{structtinyobj_1_1vertex__index}{vertex\_index}} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00036}\mbox{\hyperlink{structtinyobj_1_1vertex__index_a91a2616fb97e0da915a40654edf9b558}{00036}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structtinyobj_1_1vertex__index_a91a2616fb97e0da915a40654edf9b558}{v\_idx}}, \mbox{\hyperlink{structtinyobj_1_1vertex__index_aae7e058d3aa0993aa05e95d82dd6b8bf}{vt\_idx}}, \mbox{\hyperlink{structtinyobj_1_1vertex__index_a30f2a63a5ed20cc3ad64e340c4020da8}{vn\_idx}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00037}\mbox{\hyperlink{structtinyobj_1_1vertex__index_a44cc515c3c58d087edc620bc90d0bea8}{00037}}   \mbox{\hyperlink{structtinyobj_1_1vertex__index_a44cc515c3c58d087edc620bc90d0bea8}{vertex\_index}}() \{\};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00038}\mbox{\hyperlink{structtinyobj_1_1vertex__index_a894075fa64d32082219c138f111e4753}{00038}}   \mbox{\hyperlink{structtinyobj_1_1vertex__index_a894075fa64d32082219c138f111e4753}{vertex\_index}}(\textcolor{keywordtype}{int} idx) : \mbox{\hyperlink{structtinyobj_1_1vertex__index_a91a2616fb97e0da915a40654edf9b558}{v\_idx}}(idx), \mbox{\hyperlink{structtinyobj_1_1vertex__index_aae7e058d3aa0993aa05e95d82dd6b8bf}{vt\_idx}}(idx), \mbox{\hyperlink{structtinyobj_1_1vertex__index_a30f2a63a5ed20cc3ad64e340c4020da8}{vn\_idx}}(idx) \{\};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00039}\mbox{\hyperlink{structtinyobj_1_1vertex__index_aa3c4d6bcba36c2abb06e25497a1376a1}{00039}}   \mbox{\hyperlink{structtinyobj_1_1vertex__index_aa3c4d6bcba36c2abb06e25497a1376a1}{vertex\_index}}(\textcolor{keywordtype}{int} vidx, \textcolor{keywordtype}{int} vtidx, \textcolor{keywordtype}{int} vnidx) : \mbox{\hyperlink{structtinyobj_1_1vertex__index_a91a2616fb97e0da915a40654edf9b558}{v\_idx}}(vidx), \mbox{\hyperlink{structtinyobj_1_1vertex__index_aae7e058d3aa0993aa05e95d82dd6b8bf}{vt\_idx}}(vtidx), \mbox{\hyperlink{structtinyobj_1_1vertex__index_a30f2a63a5ed20cc3ad64e340c4020da8}{vn\_idx}}(vnidx) \{\};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00041}00041 \};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00042}00042 \textcolor{comment}{// for std::map}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00043}00043 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator<(\textcolor{keyword}{const} vertex\_index\& a, \textcolor{keyword}{const} vertex\_index\& b)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00044}00044 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00045}00045   \textcolor{keywordflow}{if} (a.v\_idx != b.v\_idx) \textcolor{keywordflow}{return} (a.v\_idx < b.v\_idx);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00046}00046   \textcolor{keywordflow}{if} (a.vn\_idx != b.vn\_idx) \textcolor{keywordflow}{return} (a.vn\_idx < b.vn\_idx);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00047}00047   \textcolor{keywordflow}{if} (a.vt\_idx != b.vt\_idx) \textcolor{keywordflow}{return} (a.vt\_idx < b.vt\_idx);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00049}00049   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00050}00050 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00052}\mbox{\hyperlink{structtinyobj_1_1obj__shape}{00052}} \textcolor{keyword}{struct }\mbox{\hyperlink{structtinyobj_1_1obj__shape}{obj\_shape}} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00053}\mbox{\hyperlink{structtinyobj_1_1obj__shape_ad088c2525809a91953fca51798f64b89}{00053}}   std::vector<float> \mbox{\hyperlink{structtinyobj_1_1obj__shape_ad088c2525809a91953fca51798f64b89}{v}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00054}\mbox{\hyperlink{structtinyobj_1_1obj__shape_ac87ced8cdff16da62a202bd390e77a8e}{00054}}   std::vector<float> \mbox{\hyperlink{structtinyobj_1_1obj__shape_ac87ced8cdff16da62a202bd390e77a8e}{vn}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00055}\mbox{\hyperlink{structtinyobj_1_1obj__shape_a2d6dcc97e66ca2596dd50236c899b456}{00055}}   std::vector<float> \mbox{\hyperlink{structtinyobj_1_1obj__shape_a2d6dcc97e66ca2596dd50236c899b456}{vt}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00056}00056 \};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00058}00058 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} isSpace(\textcolor{keyword}{const} \textcolor{keywordtype}{char} c) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00059}00059   \textcolor{keywordflow}{return} (c == \textcolor{charliteral}{' '}) || (c == \textcolor{charliteral}{'\(\backslash\)t'});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00060}00060 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00062}00062 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} isNewLine(\textcolor{keyword}{const} \textcolor{keywordtype}{char} c) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00063}00063   \textcolor{keywordflow}{return} (c == \textcolor{charliteral}{'\(\backslash\)r'}) || (c == \textcolor{charliteral}{'\(\backslash\)n'}) || (c == \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00064}00064 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00066}00066 \textcolor{comment}{// Make index zero-\/base, and also support relative index. }}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00067}00067 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} fixIndex(\textcolor{keywordtype}{int} idx, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00068}00068 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00069}00069   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00071}00071   \textcolor{keywordflow}{if} (idx > 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00072}00072     i = idx -\/ 1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00073}00073   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (idx == 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00074}00074     i = 0;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00075}00075   \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// negative value = relative}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00076}00076     i = n + idx;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00077}00077   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00078}00078   \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00079}00079 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00081}00081 \textcolor{keyword}{static} \textcolor{keyword}{inline} std::string parseString(\textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& token)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00082}00082 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00083}00083   std::string s;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00084}00084   \textcolor{keywordtype}{int} b = strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00085}00085   \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtc__constants_gab83fb6de0f05d6c0d11bdf0479f8319e}{e}} = strcspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00086}00086   s = std::string(\&token[b], \&token[\mbox{\hyperlink{group__gtc__constants_gab83fb6de0f05d6c0d11bdf0479f8319e}{e}}]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00088}00088   token += (\mbox{\hyperlink{group__gtc__constants_gab83fb6de0f05d6c0d11bdf0479f8319e}{e}} -\/ b);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00089}00089   \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00090}00090 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00092}00092 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} parseInt(\textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& token)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00093}00093 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00094}00094   token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00095}00095   \textcolor{keywordtype}{int} i = atoi(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00096}00096   token += strcspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00097}00097   \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00098}00098 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00099}00099 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00100}00100 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{float} parseFloat(\textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& token)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00101}00101 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00102}00102   token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00103}00103   \textcolor{keywordtype}{float} f = (float)atof(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00104}00104   token += strcspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00105}00105   \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00106}00106 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00108}00108 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} parseFloat2(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00109}00109   \textcolor{keywordtype}{float}\& x, \textcolor{keywordtype}{float}\& y,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00110}00110   \textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& token)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00111}00111 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00112}00112   x = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00113}00113   y = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00114}00114 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00116}00116 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} parseFloat3(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00117}00117   \textcolor{keywordtype}{float}\& x, \textcolor{keywordtype}{float}\& y, \textcolor{keywordtype}{float}\& z,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00118}00118   \textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& token)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00119}00119 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00120}00120   x = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00121}00121   y = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00122}00122   z = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00123}00123 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00124}00124 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00126}00126 \textcolor{comment}{// Parse triples: i, i/j/k, i//k, i/j}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00127}00127 \textcolor{keyword}{static} vertex\_index parseTriple(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00128}00128   \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \&token,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00129}00129   \textcolor{keywordtype}{int} vsize,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00130}00130   \textcolor{keywordtype}{int} vnsize,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00131}00131   \textcolor{keywordtype}{int} vtsize)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00132}00132 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00133}00133     vertex\_index vi(-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00134}00134 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00135}00135     vi.v\_idx = fixIndex(atoi(token), vsize);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00136}00136     token += strcspn(token, \textcolor{stringliteral}{"{}/ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00137}00137     \textcolor{keywordflow}{if} (token[0] != \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00138}00138       \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00139}00139     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00140}00140     token++;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00142}00142     \textcolor{comment}{// i//k}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00143}00143     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00144}00144       token++;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00145}00145       vi.vn\_idx = fixIndex(atoi(token), vnsize);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00146}00146       token += strcspn(token, \textcolor{stringliteral}{"{}/ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00147}00147       \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00148}00148     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00149}00149     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00150}00150     \textcolor{comment}{// i/j/k or i/j}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00151}00151     vi.vt\_idx = fixIndex(atoi(token), vtsize);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00152}00152     token += strcspn(token, \textcolor{stringliteral}{"{}/ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00153}00153     \textcolor{keywordflow}{if} (token[0] != \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00154}00154       \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00155}00155     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00157}00157     \textcolor{comment}{// i/j/k}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00158}00158     token++;  \textcolor{comment}{// skip '/'}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00159}00159     vi.vn\_idx = fixIndex(atoi(token), vnsize);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00160}00160     token += strcspn(token, \textcolor{stringliteral}{"{}/ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00161}00161     \textcolor{keywordflow}{return} vi; }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00162}00162 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00163}00163 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00164}00164 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00165}00165 updateVertex(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00166}00166   std::map<vertex\_index, unsigned int>\& vertexCache,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00167}00167   std::vector<float>\& positions,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00168}00168   std::vector<float>\& normals,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00169}00169   std::vector<float>\& texcoords,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00170}00170   \textcolor{keyword}{const} std::vector<float>\& in\_positions,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00171}00171   \textcolor{keyword}{const} std::vector<float>\& in\_normals,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00172}00172   \textcolor{keyword}{const} std::vector<float>\& in\_texcoords,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00173}00173   \textcolor{keyword}{const} vertex\_index\& i)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00174}00174 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00175}00175   \textcolor{keyword}{const} std::map<vertex\_index, unsigned int>::iterator it = vertexCache.find(i);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00176}00176 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00177}00177   \textcolor{keywordflow}{if} (it != vertexCache.end()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00178}00178     \textcolor{comment}{// found cache}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00179}00179     \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00180}00180   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00182}00182   assert(in\_positions.size() > (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (3*i.v\_idx+2));}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00183}00183 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00184}00184   positions.push\_back(in\_positions[3*i.v\_idx+0]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00185}00185   positions.push\_back(in\_positions[3*i.v\_idx+1]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00186}00186   positions.push\_back(in\_positions[3*i.v\_idx+2]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00187}00187 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00188}00188   \textcolor{keywordflow}{if} (i.vn\_idx >= 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00189}00189     normals.push\_back(in\_normals[3*i.vn\_idx+0]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00190}00190     normals.push\_back(in\_normals[3*i.vn\_idx+1]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00191}00191     normals.push\_back(in\_normals[3*i.vn\_idx+2]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00192}00192   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00193}00193 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00194}00194   \textcolor{keywordflow}{if} (i.vt\_idx >= 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00195}00195     texcoords.push\_back(in\_texcoords[2*i.vt\_idx+0]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00196}00196     texcoords.push\_back(in\_texcoords[2*i.vt\_idx+1]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00197}00197   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00199}00199   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} idx = positions.size() / 3 -\/ 1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00200}00200   vertexCache[i] = idx;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00201}00201 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00202}00202   \textcolor{keywordflow}{return} idx;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00203}00203 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00204}00204 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00205}\mbox{\hyperlink{namespacetinyobj_a02670ede322e1cc5172fbaff43a1bdb5}{00205}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacetinyobj_a02670ede322e1cc5172fbaff43a1bdb5}{InitMaterial}}(material\_t\& \mbox{\hyperlink{structmaterial}{material}}) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00206}00206   \mbox{\hyperlink{structmaterial}{material}}.name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00207}00207   \mbox{\hyperlink{structmaterial}{material}}.ambient\_texname = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00208}00208   \mbox{\hyperlink{structmaterial}{material}}.diffuse\_texname = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00209}00209   \mbox{\hyperlink{structmaterial}{material}}.specular\_texname = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00210}00210   \mbox{\hyperlink{structmaterial}{material}}.normal\_texname = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00211}00211   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i ++) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00212}00212     \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a944296102e90b1610967530458f40ba1}{ambient}}[i] = 0.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00213}00213     \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a506a0cc33282fa76872c6aeebd688b39}{diffuse}}[i] = 0.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00214}00214     \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a452d07b4570da7204caeaf798cd01a77}{specular}}[i] = 0.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00215}00215     \mbox{\hyperlink{structmaterial}{material}}.transmittance[i] = 0.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00216}00216     \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a76b696726a2ea73e6840001821942bc3}{emission}}[i] = 0.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00217}00217   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00218}00218   \mbox{\hyperlink{structmaterial}{material}}.illum = 0;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00219}00219   \mbox{\hyperlink{structmaterial}{material}}.dissolve = 1.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00220}00220   \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_aa3740fd7908ec5a11bbc4a4bd5b21abc}{shininess}} = 1.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00221}00221   \mbox{\hyperlink{structmaterial}{material}}.ior = 1.f;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00222}00222   \mbox{\hyperlink{structmaterial}{material}}.unknown\_parameter.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00223}00223 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00224}00224 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00225}00225 \textcolor{keyword}{static} \textcolor{keywordtype}{bool}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00226}00226 exportFaceGroupToShape(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00227}00227   shape\_t\& shape,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00228}00228   std::map<vertex\_index, unsigned int> vertexCache,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00229}00229   \textcolor{keyword}{const} std::vector<float> \&in\_positions,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00230}00230   \textcolor{keyword}{const} std::vector<float> \&in\_normals,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00231}00231   \textcolor{keyword}{const} std::vector<float> \&in\_texcoords,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00232}00232   \textcolor{keyword}{const} std::vector<std::vector<vertex\_index> >\& faceGroup,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00233}00233   \textcolor{keyword}{const} \textcolor{keywordtype}{int} material\_id,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00234}00234   \textcolor{keyword}{const} std::string \&name,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00235}00235   \textcolor{keywordtype}{bool} clearCache)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00236}00236 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00237}00237   \textcolor{keywordflow}{if} (faceGroup.empty()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00238}00238     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00239}00239   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00241}00241   \textcolor{keywordtype}{size\_t} offset;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00243}00243   offset = shape.mesh.indices.size();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00244}00244 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00245}00245   \textcolor{comment}{// Flatten vertices and indices}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00246}00246   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < faceGroup.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00247}00247     \textcolor{keyword}{const} std::vector<vertex\_index>\& face = faceGroup[i];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00248}00248 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00249}00249     vertex\_index i0 = face[0];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00250}00250     vertex\_index i1(-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00251}00251     vertex\_index i2 = face[1];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00252}00252 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00253}00253     \textcolor{keywordtype}{size\_t} npolys = face.size();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00255}00255     \textcolor{comment}{// Polygon -\/> triangle fan conversion}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00256}00256     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} k = 2; k < npolys; k++) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00257}00257       i1 = i2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00258}00258       i2 = face[k];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00259}00259 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00260}00260       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v0 = updateVertex(vertexCache, shape.mesh.positions, shape.mesh.normals, shape.mesh.texcoords, in\_positions, in\_normals, in\_texcoords, i0);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00261}00261       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v1 = updateVertex(vertexCache, shape.mesh.positions, shape.mesh.normals, shape.mesh.texcoords, in\_positions, in\_normals, in\_texcoords, i1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00262}00262       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v2 = updateVertex(vertexCache, shape.mesh.positions, shape.mesh.normals, shape.mesh.texcoords, in\_positions, in\_normals, in\_texcoords, i2);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00263}00263 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00264}00264       shape.mesh.indices.push\_back(v0);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00265}00265       shape.mesh.indices.push\_back(v1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00266}00266       shape.mesh.indices.push\_back(v2);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00267}00267 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00268}00268       shape.mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00269}00269     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00270}00270 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00271}00271   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00272}00272 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00273}00273   shape.name = name;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00274}00274 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00275}00275   \textcolor{keywordflow}{if} (clearCache)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00276}00276       vertexCache.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00277}00277 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00278}00278   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00280}00280 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00281}00281 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00282}\mbox{\hyperlink{namespacetinyobj_aff17f9085eec34bcc7ba97025122e732}{00282}} std::string \mbox{\hyperlink{namespacetinyobj_aff17f9085eec34bcc7ba97025122e732}{LoadMtl}} (}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00283}00283   std::map<std::string, int>\& material\_map,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00284}00284   std::vector<material\_t>\& materials,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00285}00285   std::istream\& inStream)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00286}00286 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00287}00287   material\_map.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00288}00288   std::stringstream err;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00289}00289 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00290}00290   material\_t \mbox{\hyperlink{structmaterial}{material}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00291}00291   }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00292}00292   \textcolor{keywordtype}{int} maxchars = 8192;  \textcolor{comment}{// Alloc enough size.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00293}00293   std::vector<char> buf(maxchars);  \textcolor{comment}{// Alloc enough size.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00294}00294   \textcolor{keywordflow}{while} (inStream.peek() != -\/1) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00295}00295     inStream.getline(\&buf[0], maxchars);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00296}00296 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00297}00297     std::string linebuf(\&buf[0]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00298}00298 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00299}00299     \textcolor{comment}{// Trim newline '\(\backslash\)r\(\backslash\)n' or '\(\backslash\)n'}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00300}00300     \textcolor{keywordflow}{if} (linebuf.size() > 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00301}00301       \textcolor{keywordflow}{if} (linebuf[linebuf.size()-\/1] == \textcolor{charliteral}{'\(\backslash\)n'}) linebuf.erase(linebuf.size()-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00302}00302     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00303}00303     \textcolor{keywordflow}{if} (linebuf.size() > 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00304}00304       \textcolor{keywordflow}{if} (linebuf[linebuf.size()-\/1] == \textcolor{charliteral}{'\(\backslash\)r'}) linebuf.erase(linebuf.size()-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00305}00305     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00306}00306 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00307}00307     \textcolor{comment}{// Skip if empty line.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00308}00308     \textcolor{keywordflow}{if} (linebuf.empty()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00309}00309       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00310}00310     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00311}00311 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00312}00312     \textcolor{comment}{// Skip leading space.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00313}00313     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* token = linebuf.c\_str();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00314}00314     token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00315}00315 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00316}00316     assert(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00317}00317     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\(\backslash\)0'}) \textcolor{keywordflow}{continue}; \textcolor{comment}{// empty line}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00318}00318     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00319}00319     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\#'}) \textcolor{keywordflow}{continue};  \textcolor{comment}{// comment line}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00320}00320     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00321}00321     \textcolor{comment}{// new mtl}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00322}00322     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}newmtl"{}}, 6)) \&\& isSpace((token[6]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00323}00323       \textcolor{comment}{// flush previous material.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00324}00324       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structmaterial}{material}}.name.empty())}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00325}00325       \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00326}00326           material\_map.insert(std::pair<std::string, int>(\mbox{\hyperlink{structmaterial}{material}}.name, materials.size()));}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00327}00327           materials.push\_back(\mbox{\hyperlink{structmaterial}{material}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00328}00328       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00329}00329 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00330}00330       \textcolor{comment}{// initial temporary material}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00331}00331       \mbox{\hyperlink{namespacetinyobj_a02670ede322e1cc5172fbaff43a1bdb5}{InitMaterial}}(\mbox{\hyperlink{structmaterial}{material}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00332}00332 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00333}00333       \textcolor{comment}{// set new mtl name}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00334}00334       \textcolor{keywordtype}{char} namebuf[4096];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00335}00335       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00336}00336       sscanf(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00337}00337       \mbox{\hyperlink{structmaterial}{material}}.name = namebuf;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00338}00338       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00339}00339     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00340}00340     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00341}00341     \textcolor{comment}{// ambient}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00342}00342     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'a'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00343}00343       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00344}00344       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00345}00345       parseFloat3(r, g, b, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00346}00346       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a944296102e90b1610967530458f40ba1}{ambient}}[0] = r;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00347}00347       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a944296102e90b1610967530458f40ba1}{ambient}}[1] = g;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00348}00348       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a944296102e90b1610967530458f40ba1}{ambient}}[2] = b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00349}00349       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00350}00350     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00351}00351     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00352}00352     \textcolor{comment}{// diffuse}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00353}00353     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'d'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00354}00354       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00355}00355       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00356}00356       parseFloat3(r, g, b, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00357}00357       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a506a0cc33282fa76872c6aeebd688b39}{diffuse}}[0] = r;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00358}00358       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a506a0cc33282fa76872c6aeebd688b39}{diffuse}}[1] = g;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00359}00359       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a506a0cc33282fa76872c6aeebd688b39}{diffuse}}[2] = b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00360}00360       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00361}00361     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00362}00362     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00363}00363     \textcolor{comment}{// specular}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00364}00364     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'s'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00365}00365       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00366}00366       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00367}00367       parseFloat3(r, g, b, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00368}00368       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a452d07b4570da7204caeaf798cd01a77}{specular}}[0] = r;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00369}00369       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a452d07b4570da7204caeaf798cd01a77}{specular}}[1] = g;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00370}00370       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a452d07b4570da7204caeaf798cd01a77}{specular}}[2] = b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00371}00371       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00372}00372     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00373}00373     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00374}00374     \textcolor{comment}{// transmittance}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00375}00375     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'t'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00376}00376       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00377}00377       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00378}00378       parseFloat3(r, g, b, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00379}00379       \mbox{\hyperlink{structmaterial}{material}}.transmittance[0] = r;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00380}00380       \mbox{\hyperlink{structmaterial}{material}}.transmittance[1] = g;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00381}00381       \mbox{\hyperlink{structmaterial}{material}}.transmittance[2] = b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00382}00382       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00383}00383     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00384}00384 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00385}00385     \textcolor{comment}{// ior(index of refraction)}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00386}00386     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'N'} \&\& token[1] == \textcolor{charliteral}{'i'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00387}00387       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00388}00388       \mbox{\hyperlink{structmaterial}{material}}.ior = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00389}00389       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00390}00390     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00391}00391 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00392}00392     \textcolor{comment}{// emission}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00393}00393     \textcolor{keywordflow}{if}(token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'e'} \&\& isSpace(token[2])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00394}00394       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00395}00395       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00396}00396       parseFloat3(r, g, b, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00397}00397       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a76b696726a2ea73e6840001821942bc3}{emission}}[0] = r;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00398}00398       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a76b696726a2ea73e6840001821942bc3}{emission}}[1] = g;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00399}00399       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_a76b696726a2ea73e6840001821942bc3}{emission}}[2] = b;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00400}00400       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00401}00401     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00402}00402 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00403}00403     \textcolor{comment}{// shininess}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00404}00404     \textcolor{keywordflow}{if}(token[0] == \textcolor{charliteral}{'N'} \&\& token[1] == \textcolor{charliteral}{'s'} \&\& isSpace(token[2])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00405}00405       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00406}00406       \mbox{\hyperlink{structmaterial}{material}}.\mbox{\hyperlink{structmaterial_aa3740fd7908ec5a11bbc4a4bd5b21abc}{shininess}} = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00407}00407       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00408}00408     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00409}00409 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00410}00410     \textcolor{comment}{// illum model}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00411}00411     \textcolor{keywordflow}{if} (0 == strncmp(token, \textcolor{stringliteral}{"{}illum"{}}, 5) \&\& isSpace(token[5])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00412}00412       token += 6;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00413}00413       \mbox{\hyperlink{structmaterial}{material}}.illum = parseInt(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00414}00414       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00415}00415     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00416}00416 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00417}00417     \textcolor{comment}{// dissolve}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00418}00418     \textcolor{keywordflow}{if} ((token[0] == \textcolor{charliteral}{'d'} \&\& isSpace(token[1]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00419}00419       token += 1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00420}00420       \mbox{\hyperlink{structmaterial}{material}}.dissolve = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00421}00421       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00422}00422     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00423}00423     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'T'} \&\& token[1] == \textcolor{charliteral}{'r'} \&\& isSpace(token[2])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00424}00424       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00425}00425       \mbox{\hyperlink{structmaterial}{material}}.dissolve = parseFloat(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00426}00426       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00427}00427     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00428}00428 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00429}00429     \textcolor{comment}{// ambient texture}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00430}00430     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ka"{}}, 6)) \&\& isSpace(token[6])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00431}00431       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00432}00432       \mbox{\hyperlink{structmaterial}{material}}.ambient\_texname = token;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00433}00433       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00434}00434     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00435}00435 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00436}00436     \textcolor{comment}{// diffuse texture}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00437}00437     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Kd"{}}, 6)) \&\& isSpace(token[6])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00438}00438       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00439}00439       \mbox{\hyperlink{structmaterial}{material}}.diffuse\_texname = token;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00440}00440       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00441}00441     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00442}00442 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00443}00443     \textcolor{comment}{// specular texture}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00444}00444     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ks"{}}, 6)) \&\& isSpace(token[6])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00445}00445       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00446}00446       \mbox{\hyperlink{structmaterial}{material}}.specular\_texname = token;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00447}00447       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00448}00448     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00449}00449 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00450}00450     \textcolor{comment}{// normal texture}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00451}00451     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ns"{}}, 6)) \&\& isSpace(token[6])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00452}00452       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00453}00453       \mbox{\hyperlink{structmaterial}{material}}.normal\_texname = token;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00454}00454       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00455}00455     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00456}00456 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00457}00457     \textcolor{comment}{// unknown parameter}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00458}00458     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \_space = strchr(token, \textcolor{charliteral}{' '});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00459}00459     \textcolor{keywordflow}{if}(!\_space) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00460}00460       \_space = strchr(token, \textcolor{charliteral}{'\(\backslash\)t'});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00461}00461     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00462}00462     \textcolor{keywordflow}{if}(\_space) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00463}00463       \textcolor{keywordtype}{int} len = \_space -\/ token;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00464}00464       std::string key(token, len);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00465}00465       std::string value = \_space + 1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00466}00466       \mbox{\hyperlink{structmaterial}{material}}.unknown\_parameter.insert(std::pair<std::string, std::string>(key, value));}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00467}00467     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00468}00468   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00469}00469   \textcolor{comment}{// flush last material.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00470}00470   material\_map.insert(std::pair<std::string, int>(\mbox{\hyperlink{structmaterial}{material}}.name, materials.size()));}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00471}00471   materials.push\_back(\mbox{\hyperlink{structmaterial}{material}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00472}00472 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00473}00473   \textcolor{keywordflow}{return} err.str();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00474}00474 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00475}00475 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00476}00476 std::string MaterialFileReader::operator() (}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00477}00477     \textcolor{keyword}{const} std::string\& matId,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00478}00478     std::vector<material\_t>\& materials,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00479}00479     std::map<std::string, int>\& matMap)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00480}00480 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00481}00481   std::string filepath;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00482}00482 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00483}00483   \textcolor{keywordflow}{if} (!m\_mtlBasePath.empty()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00484}00484     filepath = std::string(m\_mtlBasePath) + matId;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00485}00485   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00486}00486     filepath = matId;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00487}00487   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00488}00488 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00489}00489   std::ifstream matIStream(filepath.c\_str());}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00490}00490   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetinyobj_aff17f9085eec34bcc7ba97025122e732}{LoadMtl}}(matMap, materials, matIStream);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00491}00491 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00492}00492 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00493}00493 std::string}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00494}\mbox{\hyperlink{namespacetinyobj_a8a1b09e98bbe6ad056bf30fdce87b3c5}{00494}} \mbox{\hyperlink{namespacetinyobj_a8a1b09e98bbe6ad056bf30fdce87b3c5}{LoadObj}}(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00495}00495   std::vector<shape\_t>\& shapes,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00496}00496   std::vector<material\_t>\& materials,   \textcolor{comment}{// [output]}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00497}00497   \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00498}00498   \textcolor{keyword}{const} \textcolor{keywordtype}{char}* mtl\_basepath)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00499}00499 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00500}00500 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00501}00501   shapes.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00502}00502 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00503}00503   std::stringstream err;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00504}00504 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00505}00505   std::ifstream ifs(filename);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00506}00506   \textcolor{keywordflow}{if} (!ifs) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00507}00507     err << \textcolor{stringliteral}{"{}Cannot open file ["{}} << filename << \textcolor{stringliteral}{"{}]"{}} << std::endl;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00508}00508     \textcolor{keywordflow}{return} err.str();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00509}00509   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00510}00510 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00511}00511   std::string basePath;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00512}00512   \textcolor{keywordflow}{if} (mtl\_basepath) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00513}00513     basePath = mtl\_basepath;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00514}00514   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00515}00515   MaterialFileReader matFileReader( basePath );}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00516}00516   }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00517}00517   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetinyobj_a8a1b09e98bbe6ad056bf30fdce87b3c5}{LoadObj}}(shapes, materials, ifs, matFileReader);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00518}00518 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00519}00519 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00520}\mbox{\hyperlink{namespacetinyobj_acb20cdb095743e069eac27c0b95d32b8}{00520}} std::string \mbox{\hyperlink{namespacetinyobj_a8a1b09e98bbe6ad056bf30fdce87b3c5}{LoadObj}}(}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00521}00521   std::vector<shape\_t>\& shapes,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00522}00522   std::vector<material\_t>\& materials,   \textcolor{comment}{// [output]}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00523}00523   std::istream\& inStream,}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00524}00524   MaterialReader\& readMatFn)}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00525}00525 \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00526}00526   std::stringstream err;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00527}00527 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00528}00528   std::vector<float> v;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00529}00529   std::vector<float> vn;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00530}00530   std::vector<float> vt;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00531}00531   std::vector<std::vector<vertex\_index> > faceGroup;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00532}00532   std::string name;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00533}00533 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00534}00534   \textcolor{comment}{// material}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00535}00535   std::map<std::string, int> material\_map;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00536}00536   std::map<vertex\_index, unsigned int> vertexCache;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00537}00537   \textcolor{keywordtype}{int}  \mbox{\hyperlink{structmaterial}{material}} = -\/1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00538}00538 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00539}00539   shape\_t shape;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00540}00540 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00541}00541   \textcolor{keywordtype}{int} maxchars = 8192;  \textcolor{comment}{// Alloc enough size.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00542}00542   std::vector<char> buf(maxchars);  \textcolor{comment}{// Alloc enough size.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00543}00543   \textcolor{keywordflow}{while} (inStream.peek() != -\/1) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00544}00544     inStream.getline(\&buf[0], maxchars);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00545}00545 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00546}00546     std::string linebuf(\&buf[0]);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00547}00547 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00548}00548     \textcolor{comment}{// Trim newline '\(\backslash\)r\(\backslash\)n' or '\(\backslash\)n'}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00549}00549     \textcolor{keywordflow}{if} (linebuf.size() > 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00550}00550       \textcolor{keywordflow}{if} (linebuf[linebuf.size()-\/1] == \textcolor{charliteral}{'\(\backslash\)n'}) linebuf.erase(linebuf.size()-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00551}00551     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00552}00552     \textcolor{keywordflow}{if} (linebuf.size() > 0) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00553}00553       \textcolor{keywordflow}{if} (linebuf[linebuf.size()-\/1] == \textcolor{charliteral}{'\(\backslash\)r'}) linebuf.erase(linebuf.size()-\/1);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00554}00554     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00555}00555 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00556}00556     \textcolor{comment}{// Skip if empty line.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00557}00557     \textcolor{keywordflow}{if} (linebuf.empty()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00558}00558       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00559}00559     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00560}00560 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00561}00561     \textcolor{comment}{// Skip leading space.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00562}00562     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* token = linebuf.c\_str();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00563}00563     token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00564}00564 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00565}00565     assert(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00566}00566     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\(\backslash\)0'}) \textcolor{keywordflow}{continue}; \textcolor{comment}{// empty line}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00567}00567     }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00568}00568     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\#'}) \textcolor{keywordflow}{continue};  \textcolor{comment}{// comment line}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00569}00569 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00570}00570     \textcolor{comment}{// vertex}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00571}00571     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& isSpace((token[1]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00572}00572       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00573}00573       \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00574}00574       parseFloat3(x, y, z, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00575}00575       v.push\_back(x);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00576}00576       v.push\_back(y);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00577}00577       v.push\_back(z);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00578}00578       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00579}00579     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00580}00580 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00581}00581     \textcolor{comment}{// normal}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00582}00582     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& token[1] == \textcolor{charliteral}{'n'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00583}00583       token += 3;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00584}00584       \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00585}00585       parseFloat3(x, y, z, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00586}00586       vn.push\_back(x);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00587}00587       vn.push\_back(y);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00588}00588       vn.push\_back(z);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00589}00589       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00590}00590     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00591}00591 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00592}00592     \textcolor{comment}{// texcoord}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00593}00593     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& token[1] == \textcolor{charliteral}{'t'} \&\& isSpace((token[2]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00594}00594       token += 3;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00595}00595       \textcolor{keywordtype}{float} x, y;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00596}00596       parseFloat2(x, y, token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00597}00597       vt.push\_back(x);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00598}00598       vt.push\_back(y);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00599}00599       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00600}00600     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00601}00601 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00602}00602     \textcolor{comment}{// face}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00603}00603     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'f'} \&\& isSpace((token[1]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00604}00604       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00605}00605       token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00606}00606 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00607}00607       std::vector<vertex\_index> face;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00608}00608       \textcolor{keywordflow}{while} (!isNewLine(token[0])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00609}00609         \mbox{\hyperlink{structtinyobj_1_1vertex__index}{vertex\_index}} vi = parseTriple(token, v.size() / 3, vn.size() / 3, vt.size() / 2);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00610}00610         face.push\_back(vi);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00611}00611         \textcolor{keywordtype}{int} n = strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00612}00612         token += n;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00613}00613       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00614}00614 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00615}00615       faceGroup.push\_back(face);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00616}00616       }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00617}00617       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00618}00618     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00619}00619 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00620}00620     \textcolor{comment}{// use mtl}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00621}00621     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}usemtl"{}}, 6)) \&\& isSpace((token[6]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00622}00622 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00623}00623       \textcolor{keywordtype}{char} namebuf[4096];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00624}00624       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00625}00625       sscanf(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00626}00626 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00627}00627       \textcolor{keywordtype}{bool} ret = exportFaceGroupToShape(shape, vertexCache, v, vn, vt, faceGroup, \mbox{\hyperlink{structmaterial}{material}}, name, \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00628}00628       faceGroup.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00629}00629 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00630}00630       \textcolor{keywordflow}{if} (material\_map.find(namebuf) != material\_map.end()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00631}00631         \mbox{\hyperlink{structmaterial}{material}} = material\_map[namebuf];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00632}00632       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00633}00633         \textcolor{comment}{// \{ error!! material not found \}}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00634}00634         \mbox{\hyperlink{structmaterial}{material}} = -\/1;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00635}00635       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00636}00636 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00637}00637       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00638}00638 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00639}00639     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00640}00640 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00641}00641     \textcolor{comment}{// load mtl}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00642}00642     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}mtllib"{}}, 6)) \&\& isSpace((token[6]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00643}00643       \textcolor{keywordtype}{char} namebuf[4096];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00644}00644       token += 7;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00645}00645       sscanf(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00646}00646         }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00647}00647       std::string err\_mtl = readMatFn(namebuf, materials, material\_map);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00648}00648       \textcolor{keywordflow}{if} (!err\_mtl.empty()) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00649}00649         faceGroup.clear();  \textcolor{comment}{// for safety}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00650}00650         \textcolor{keywordflow}{return} err\_mtl;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00651}00651       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00652}00652       }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00653}00653       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00654}00654     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00655}00655 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00656}00656     \textcolor{comment}{// group name}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00657}00657     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'g'} \&\& isSpace((token[1]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00658}00658 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00659}00659       \textcolor{comment}{// flush previous face group.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00660}00660       \textcolor{keywordtype}{bool} ret = exportFaceGroupToShape(shape, vertexCache, v, vn, vt, faceGroup, \mbox{\hyperlink{structmaterial}{material}}, name, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00661}00661       \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00662}00662         shapes.push\_back(shape);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00663}00663       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00664}00664 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00665}00665       shape = shape\_t();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00666}00666 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00667}00667       \textcolor{comment}{//material = -\/1;}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00668}00668       faceGroup.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00669}00669 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00670}00670       std::vector<std::string> names;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00671}00671       \textcolor{keywordflow}{while} (!isNewLine(token[0])) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00672}00672         std::string str = parseString(token);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00673}00673         names.push\_back(str);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00674}00674         token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r"{}}); \textcolor{comment}{// skip tag}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00675}00675       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00676}00676 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00677}00677       assert(names.size() > 0);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00678}00678 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00679}00679       \textcolor{comment}{// names[0] must be 'g', so skipt 0th element.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00680}00680       \textcolor{keywordflow}{if} (names.size() > 1) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00681}00681         name = names[1];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00682}00682       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00683}00683         name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00684}00684       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00685}00685 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00686}00686       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00687}00687     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00688}00688 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00689}00689     \textcolor{comment}{// object name}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00690}00690     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'o'} \&\& isSpace((token[1]))) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00691}00691 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00692}00692       \textcolor{comment}{// flush previous face group.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00693}00693       \textcolor{keywordtype}{bool} ret = exportFaceGroupToShape(shape, vertexCache, v, vn, vt, faceGroup, \mbox{\hyperlink{structmaterial}{material}}, name, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00694}00694       \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00695}00695         shapes.push\_back(shape);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00696}00696       \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00697}00697 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00698}00698       \textcolor{comment}{//material = -\/1;}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00699}00699       faceGroup.clear();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00700}00700       shape = shape\_t();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00701}00701 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00702}00702       \textcolor{comment}{// @todo \{ multiple object name? \}}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00703}00703       \textcolor{keywordtype}{char} namebuf[4096];}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00704}00704       token += 2;}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00705}00705       sscanf(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00706}00706       name = std::string(namebuf);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00707}00707 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00708}00708 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00709}00709       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00710}00710     \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00711}00711 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00712}00712     \textcolor{comment}{// Ignore unknown command.}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00713}00713   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00714}00714 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00715}00715   \textcolor{keywordtype}{bool} ret = exportFaceGroupToShape(shape, vertexCache, v, vn, vt, faceGroup, \mbox{\hyperlink{structmaterial}{material}}, name, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00716}00716   \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00717}00717     shapes.push\_back(shape);}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00718}00718   \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00719}00719   faceGroup.clear();  \textcolor{comment}{// for safety}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00720}00720 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00721}00721   \textcolor{keywordflow}{return} err.str();}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00722}00722 \}}
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00723}00723 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00724}00724 }
\DoxyCodeLine{\Hypertarget{tiny__obj__loader_8cpp_source_l00725}00725 \}}

\end{DoxyCode}
